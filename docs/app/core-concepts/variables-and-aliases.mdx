---
title: å˜é‡ä¸åˆ«å
description: å­¦ä¹ å¦‚ä½•åœ¨Cypressä¸­å¤„ç†å¼‚æ­¥ä»£ç ï¼Œä½•æ—¶èµ‹å€¼å˜é‡ï¼Œå¦‚ä½•ä½¿ç”¨åˆ«ååœ¨é’©å­å’Œæµ‹è¯•é—´å…±äº«å¯¹è±¡ï¼Œä»¥åŠå¦‚ä½•ä¸ºDOMå…ƒç´ ã€æ‹¦æˆªå’Œè¯·æ±‚åˆ›å»ºåˆ«åã€‚
sidebar_position: 40
---

<ProductHeading product="app" />

# å˜é‡ä¸åˆ«å

:::info

##### <Icon name="question-circle" color="#4BBFD2" /> å­¦ä¹ ç›®æ ‡

- Cypressä¸­å¤„ç†å¼‚æ­¥ä»£ç çš„å¸¸è§æ¨¡å¼
- ä½•æ—¶åº”è¯¥èµ‹å€¼å˜é‡ï¼Œä½•æ—¶ä¸éœ€è¦
- å¦‚ä½•ä½¿ç”¨åˆ«ååœ¨é’©å­å’Œæµ‹è¯•é—´å…±äº«å¯¹è±¡
- ä½¿ç”¨`this`çš„é™·é˜±åŠå¦‚ä½•é¿å…
- å¦‚ä½•ä¸ºDOMå…ƒç´ ã€æ‹¦æˆªå’Œè¯·æ±‚åˆ›å»ºåˆ«å

:::

Cypressæ–°æ‰‹å¯èƒ½ä¼šå‘ç°å¤„ç†APIçš„å¼‚æ­¥ç‰¹æ€§å¾ˆæœ‰æŒ‘æˆ˜æ€§ã€‚æœ‰è®¸å¤šæ–¹æ³•å¯ä»¥å¼•ç”¨ã€æ¯”è¾ƒå’Œä½¿ç”¨Cypresså‘½ä»¤è¿”å›çš„å¯¹è±¡ã€‚ä¸€æ—¦æŒæ¡å¼‚æ­¥ä»£ç ï¼Œä½ ä¼šæ„è¯†åˆ°æ— éœ€å¤æ‚æŠ€å·§å°±èƒ½å®ç°åŒæ­¥ä»£ç çš„æ‰€æœ‰åŠŸèƒ½ã€‚

æœ¬æŒ‡å—æ¢è®¨äº†è®¸å¤šç¼–å†™ä¼˜è´¨Cypressä»£ç çš„å¸¸è§æ¨¡å¼ï¼Œè¿™äº›æ¨¡å¼èƒ½å¤„ç†æœ€å¤æ‚çš„æƒ…å†µã€‚

å¼‚æ­¥APIåœ¨JavaScriptä¸­å·²æˆä¸ºå¸¸æ€ï¼Œç°ä»£ä»£ç ä¸­éšå¤„å¯è§ã€‚å®é™…ä¸Šï¼Œå¤§å¤šæ•°æ–°çš„æµè§ˆå™¨APIéƒ½æ˜¯å¼‚æ­¥çš„ï¼Œè®¸å¤šNodeæ ¸å¿ƒæ¨¡å—ä¹Ÿæ˜¯å¦‚æ­¤ã€‚

ä¸‹é¢æ¢è®¨çš„æ¨¡å¼åœ¨Cypresså†…å¤–éƒ½å¾ˆæœ‰ç”¨ã€‚é¦–å…ˆéœ€è¦è®¤è¯†çš„æœ€é‡è¦æ¦‚å¿µæ˜¯...

:::danger

**ä½ ä¸èƒ½ç›´æ¥èµ‹å€¼æˆ–æ“ä½œ**ä»»ä½•Cypresså‘½ä»¤çš„è¿”å›å€¼ã€‚å‘½ä»¤æ˜¯å¼‚æ­¥æ’é˜Ÿæ‰§è¡Œçš„ã€‚

:::

```js
// è¿™ç§æ–¹å¼ä¸ä¼šæŒ‰é¢„æœŸå·¥ä½œ
const button = cy.get('button')
const form = cy.get('form')

button.click()
```

### é—­åŒ…

è¦è®¿é—®Cypresså‘½ä»¤çš„è¿”å›å€¼ï¼Œéœ€è¦ä½¿ç”¨[`.then()`](/api/commands/then)ã€‚

```js
cy.get('button').then(($btn) => {
  // $btnæ˜¯ä¸Šä¸€ä¸ªå‘½ä»¤è¿”å›çš„å¯¹è±¡
})
```

å¦‚æœç†Ÿæ‚‰[åŸç”ŸPromise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises)ï¼ŒCypressçš„`.then()`å·¥ä½œæ–¹å¼ç±»ä¼¼ã€‚ä½ å¯ä»¥åœ¨`.then()`ä¸­ç»§ç»­åµŒå¥—æ›´å¤šCypresså‘½ä»¤ã€‚

æ¯ä¸ªåµŒå¥—å‘½ä»¤éƒ½èƒ½è®¿é—®ä¹‹å‰å‘½ä»¤çš„ç»“æœï¼Œè¿™ä½¿å¾—ä»£ç å¯è¯»æ€§å¾ˆå¥½ã€‚

```js
cy.get('button').then(($btn) => {
  // å­˜å‚¨æŒ‰é’®æ–‡æœ¬
  const txt = $btn.text()

  // æäº¤è¡¨å•
  cy.get('form').submit()

  // æ¯”è¾ƒä¸¤ä¸ªæŒ‰é’®æ–‡æœ¬
  // ç¡®ä¿å®ƒä»¬ä¸åŒ
  cy.get('button').should(($btn2) => {
    expect($btn2.text()).not.to.eq(txt)
  })
})

// è¿™äº›å‘½ä»¤ä¼šåœ¨æ‰€æœ‰
// å‰é¢å‘½ä»¤å®Œæˆåæ‰§è¡Œ
cy.get(...).find(...).should(...)
```

`.then()`å¤–éƒ¨çš„å‘½ä»¤ä¼šç­‰åˆ°æ‰€æœ‰åµŒå¥—å‘½ä»¤å®Œæˆåæ‰æ‰§è¡Œã€‚

:::info

é€šè¿‡å›è°ƒå‡½æ•°ï¼Œæˆ‘ä»¬åˆ›å»ºäº†[é—­åŒ…](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures)ã€‚é—­åŒ…è®©æˆ‘ä»¬èƒ½ä¿ç•™å¯¹ä¹‹å‰å‘½ä»¤ç»“æœçš„å¼•ç”¨ã€‚

:::

### è°ƒè¯•

ä½¿ç”¨`.then()`å‡½æ•°æ˜¯ä½¿ç”¨[`debugger`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/debugger)çš„ç»ä½³æœºä¼šã€‚è¿™èƒ½å¸®åŠ©ä½ ç†è§£å‘½ä»¤æ‰§è¡Œé¡ºåºï¼Œä¹Ÿèƒ½æ£€æŸ¥æ¯ä¸ªå‘½ä»¤è¿”å›çš„å¯¹è±¡ã€‚

```js
cy.get('button').then(($btn) => {
  // æ£€æŸ¥$btn <å¯¹è±¡>
  debugger

  cy.get('[data-testid="countries"]')
    .select('USA')
    .then(($select) => {
      // æ£€æŸ¥$select <å¯¹è±¡>
      debugger

      cy.clock().then(($clock) => {
        // æ£€æŸ¥$clock <å¯¹è±¡>
        debugger

        $btn // ä»ç„¶å¯ç”¨
        $select // ä¹Ÿä»ç„¶å¯ç”¨
      })
    })
})
```

### å˜é‡

é€šå¸¸åœ¨Cypressä¸­å‡ ä¹ä¸éœ€è¦ä½¿ç”¨`const`ã€`let`æˆ–`var`ã€‚ä½¿ç”¨é—­åŒ…æ—¶ï¼Œä½ æ€»èƒ½è®¿é—®å‘½ä»¤è¿”å›çš„å¯¹è±¡è€Œæ— éœ€èµ‹å€¼ã€‚

å”¯ä¸€çš„ä¾‹å¤–æ˜¯å¤„ç†å¯å˜çŠ¶æ€å¯¹è±¡æ—¶ã€‚å½“å¯¹è±¡çŠ¶æ€å˜åŒ–æ—¶ï¼Œä½ é€šå¸¸éœ€è¦æ¯”è¾ƒå‰åå€¼ã€‚

è¿™æ˜¯ä½¿ç”¨`const`çš„å¥½ä¾‹å­ã€‚

```html
<button>increment</button>

ä½ ç‚¹å‡»äº†æŒ‰é’® <span data-testid="num">0</span> æ¬¡
```

```js
// åº”ç”¨ä»£ç 
let count = 0

$('button').on('click', () => {
  $('[data-testid="num"]').text((count += 1))
})
```

```js
// Cypressæµ‹è¯•ä»£ç 
cy.get('[data-testid="num"]').then(($span) => {
  // æ•è·å½“å‰æ•°å€¼
  const num1 = parseFloat($span.text())

  cy.get('button')
    .click()
    .then(() => {
      // å†æ¬¡æ•è·
      const num2 = parseFloat($span.text())

      // éªŒè¯æ˜¯å¦ç¬¦åˆé¢„æœŸ
      expect(num2).to.eq(num1 + 1)
    })
})
```

ä½¿ç”¨`const`çš„åŸå› æ˜¯`$span`å¯¹è±¡æ˜¯å¯å˜çš„ã€‚å¤„ç†å¯å˜å¯¹è±¡å¹¶éœ€è¦æ¯”è¾ƒæ—¶ï¼Œå¿…é¡»å­˜å‚¨å®ƒä»¬çš„å€¼ã€‚`const`æ˜¯å®Œç¾é€‰æ‹©ã€‚

## åˆ«å

ä½¿ç”¨`.then()`å›è°ƒè®¿é—®ä¹‹å‰å‘½ä»¤çš„å€¼å¾ˆå¥½ï¼Œä½†åœ¨`before`æˆ–`beforeEach`ç­‰é’©å­ä¸­è¿è¡Œä»£ç æ—¶æ€ä¹ˆåŠï¼Ÿ

```js
beforeEach(() => {
  cy.get('button').then(($btn) => {
    const text = $btn.text()
  })
})

it('æ— æ³•è®¿é—®text', () => {
  // å¦‚ä½•è®¿é—®text?!
})
```

å¦‚ä½•è®¿é—®`text`ï¼Ÿ

æˆ‘ä»¬å¯ä»¥ç”¨`let`åšäº›ä¸‘é™‹çš„æŠ€å·§æ¥è®¿é—®å®ƒã€‚

:::danger

<strong>ä¸è¦è¿™æ ·åš</strong>

ä¸‹é¢çš„ä»£ç ä»…ç”¨äºæ¼”ç¤ºã€‚

:::

```js
describe('æµ‹è¯•å¥—ä»¶', () => {
  // åˆ›å»ºé—­åŒ…ä¿å­˜
  // 'text'ä»¥ä¾¿è®¿é—®
  let text

  beforeEach(() => {
    cy.get('button').then(($btn) => {
      // é‡æ–°å®šä¹‰textå¼•ç”¨
      text = $btn.text()
    })
  })

  it('å¯ä»¥è®¿é—®text', () => {
    // ç°åœ¨textå¯ç”¨äº†
    // ä½†è¿™ä¸æ˜¯å¥½æ–¹æ¡ˆ :(
    text
  })
})
```

å¹¸è¿çš„æ˜¯ï¼Œä½ ä¸å¿…ç”¨è¿™ç§æŠ€å·§ã€‚Cypressæä¾›äº†æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚

:::tip

<strong>å¼•å…¥åˆ«å</strong>

åˆ«åæ˜¯Cypressä¸­å¼ºå¤§çš„åŠŸèƒ½ï¼Œæœ‰å¤šç§ç”¨é€”ã€‚ä¸‹é¢æˆ‘ä»¬å°†æ¢è®¨æ¯ç§ç”¨æ³•ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬ç”¨å®ƒæ¥åœ¨é’©å­å’Œæµ‹è¯•é—´å…±äº«å¯¹è±¡ã€‚

:::

### å…±äº«ä¸Šä¸‹æ–‡

å…±äº«ä¸Šä¸‹æ–‡æ˜¯åˆ«åæœ€ç®€å•çš„ç”¨æ³•ã€‚

ä½¿ç”¨[`.as()`](/api/commands/as)å‘½ä»¤åˆ›å»ºè¦å…±äº«çš„åˆ«åã€‚

çœ‹ä¹‹å‰ä¾‹å­ç”¨åˆ«åçš„å®ç°ï¼š

```js
beforeEach(() => {
  // å°†$btn.text()åˆ«åä¸º'text'
  cy.get('button').invoke('text').as('text')
})

it('å¯ä»¥è®¿é—®text', function () {
  this.text // ç°åœ¨å¯ç”¨äº†
})
```

åº•å±‚å®ç°ä¸Šï¼Œåˆ«ååŸºæœ¬å¯¹è±¡å’ŒåŸå§‹å€¼åˆ©ç”¨äº†Mochaçš„å…±äº«[`context`](https://github.com/mochajs/mocha/wiki/Shared-Behaviours)å¯¹è±¡ï¼šå³åˆ«åå¯ä½œä¸º`this.*`è®¿é—®ã€‚

Mochaè‡ªåŠ¨åœ¨æ¯ä¸ªæµ‹è¯•çš„é€‚ç”¨é’©å­é—´å…±äº«ä¸Šä¸‹æ–‡ã€‚æ­¤å¤–ï¼Œè¿™äº›åˆ«åå’Œå±æ€§ä¼šåœ¨æ¯ä¸ªæµ‹è¯•åè‡ªåŠ¨æ¸…ç†ã€‚

```js
describe('çˆ¶çº§', () => {
  beforeEach(() => {
    cy.wrap('one').as('a')
  })

  context('å­çº§', () => {
    beforeEach(() => {
      cy.wrap('two').as('b')
    })

    describe('å­™çº§', () => {
      beforeEach(() => {
        cy.wrap('three').as('c')
      })

      it('å¯ä»¥è®¿é—®æ‰€æœ‰åˆ«åå±æ€§', function () {
        expect(this.a).to.eq('one') // true
        expect(this.b).to.eq('two') // true
        expect(this.c).to.eq('three') // true
      })
    })
  })
})
```

#### è®¿é—®Fixture:

å…±äº«ä¸Šä¸‹æ–‡æœ€å¸¸è§çš„ç”¨ä¾‹æ˜¯å¤„ç†[`cy.fixture()`](/api/commands/fixture)ã€‚

é€šå¸¸åœ¨`beforeEach`é’©å­ä¸­åŠ è½½fixtureï¼Œä½†éœ€è¦åœ¨æµ‹è¯•ä¸­ä½¿ç”¨è¿™äº›å€¼ã€‚

```js
beforeEach(() => {
  // ä¸ºusers fixtureåˆ›å»ºåˆ«å
  cy.fixture('users.json').as('users')
})

it('ä»¥æŸç§æ–¹å¼ä½¿ç”¨users', function () {
  // è®¿é—®userså±æ€§
  const user = this.users[0]

  // ç¡®ä¿æ ‡é¢˜åŒ…å«ç¬¬ä¸€ä¸ªç”¨æˆ·å
  cy.get('header').should('contain', user.name)
})
```

:::danger

<strong>æ³¨æ„å¼‚æ­¥å‘½ä»¤</strong>

åˆ«å¿˜äº†**Cypresså‘½ä»¤æ˜¯å¼‚æ­¥çš„**ï¼

åœ¨`.as()`å‘½ä»¤æ‰§è¡Œå‰ä¸èƒ½ä½¿ç”¨`this.*`å¼•ç”¨ã€‚

:::

```js
it('æ²¡æœ‰æ­£ç¡®ä½¿ç”¨åˆ«å', function () {
  cy.fixture('users.json').as('users')

  // è¿™æ ·ä¸è¡Œ
  //
  // this.usersæœªå®šä¹‰
  // å› ä¸º'as'å‘½ä»¤åªæ˜¯å…¥é˜Ÿ
  // è¿˜æœªæ‰§è¡Œ
  const user = this.users[0]
})
```

ä¹‹å‰ä»‹ç»çš„åŸåˆ™åŒæ ·é€‚ç”¨ã€‚è¦è®¿é—®å‘½ä»¤è¿”å›å€¼ï¼Œå¿…é¡»åœ¨é—­åŒ…ä¸­ä½¿ç”¨[`.then()`](/api/commands/then)ã€‚

```js
// è¿™æ ·å®Œå…¨æ­£ç¡®
cy.fixture('users.json').then((users) => {
  // ç°åœ¨å¯ä»¥å®Œå…¨ä¸ç”¨åˆ«å
  // ç›´æ¥ä½¿ç”¨å›è°ƒå‡½æ•°
  const user = users[0]

  // é€šè¿‡
  cy.get('header').should('contain', user.name)
})
```

#### é¿å…ä½¿ç”¨`this`

:::caution

<strong>ç®­å¤´å‡½æ•°</strong>

å¦‚æœæµ‹è¯•æˆ–é’©å­ä½¿ç”¨[ç®­å¤´å‡½æ•°](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions)ï¼Œç”¨`this.*`è®¿é—®åˆ«åå°†ä¸èµ·ä½œç”¨ã€‚

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ‰€æœ‰ä¾‹å­éƒ½ä½¿ç”¨å¸¸è§„`function () {}`è¯­æ³•è€Œä¸æ˜¯lambdaç®­å¤´è¯­æ³•`() => {}`ã€‚

:::

é™¤äº†`this.*`è¯­æ³•ï¼Œè¿˜æœ‰å¦ä¸€ç§è®¿é—®åˆ«åçš„æ–¹å¼ã€‚

[`cy.get()`](/api/commands/get)å‘½ä»¤å¯ä»¥é€šè¿‡`@`å­—ç¬¦çš„ç‰¹æ®Šè¯­æ³•è®¿é—®åˆ«åï¼š

```js
beforeEach(() => {
  // ä¸ºusers fixtureåˆ›å»ºåˆ«å
  cy.fixture('users.json').as('users')
})

it('ä»¥æŸç§æ–¹å¼ä½¿ç”¨users', function () {
  // ä½¿ç”¨ç‰¹æ®Šçš„'@'è¯­æ³•è®¿é—®åˆ«å
  // é¿å…ä½¿ç”¨'this'
  cy.get('@users').then((users) => {
    // è®¿é—®userså‚æ•°
    const user = users[0]

    // ç¡®ä¿æ ‡é¢˜åŒ…å«ç¬¬ä¸€ä¸ªç”¨æˆ·å
    cy.get('header').should('contain', user.name)
  })
})
```

ä½¿ç”¨[`cy.get()`](/api/commands/get)å¯ä»¥é¿å…ä½¿ç”¨`this`ã€‚

è®°ä½ä¸¤ç§æ–¹æ³•å„æœ‰é€‚ç”¨åœºæ™¯ï¼Œå› ä¸ºå®ƒä»¬æœ‰ä¸ªé‡è¦åŒºåˆ«ã€‚

ä½¿ç”¨`this.users`æ—¶ï¼Œå€¼åœ¨é¦–æ¬¡æ±‚å€¼æ—¶å­˜å‚¨åœ¨ä¸Šä¸‹æ–‡ä¸­ã€‚è€Œä½¿ç”¨`cy.get('@users')`æ—¶ï¼Œæ¯æ¬¡è®¿é—®åˆ«åéƒ½ä¼šé‡æ–°æŸ¥è¯¢ã€‚

```javascript
const favorites = { color: 'blue' }

cy.wrap(favorites).its('color').as('favoriteColor')

cy.then(function () {
  favorites.color = 'red'
})

cy.get('@favoriteColor').then(function (aliasValue) {
  expect(aliasValue).to.eql('red')

  expect(this.favoriteColor).to.eql('blue')
})
```

åœ¨ç¬¬äºŒä¸ª`.then()`å—ä¸­ï¼Œ`cy.get('@favoriteColor')`æ¯æ¬¡éƒ½ä¼šé‡æ–°è¿è¡Œ`cy.wrap(favorites).its('color')`ï¼Œè€Œ`this.favoriteColor`æ˜¯åœ¨åˆ«åé¦–æ¬¡å­˜å‚¨æ—¶è®¾ç½®çš„ï¼Œé‚£æ—¶é¢œè‰²è¿˜æ˜¯è“è‰²ã€‚

### DOMå…ƒç´ 

åˆ«åç”¨äºDOMå…ƒç´ æ—¶æœ‰å…¶ä»–ç‰¹æ®Šç‰¹æ€§ã€‚

ä¸ºDOMå…ƒç´ åˆ›å»ºåˆ«ååï¼Œå¯ä»¥ç¨åè®¿é—®å®ƒä»¬è¿›è¡Œå¤ç”¨ã€‚

```javascript
// å°†è¡¨æ ¼ä¸­æ‰€æœ‰tråˆ«åä¸º'rows'
cy.get('table').find('tr').as('rows')
```

å†…éƒ¨å®ç°ä¸Šï¼ŒCypresså°†`<tr>`é›†åˆå¼•ç”¨ä¸º"rows"åˆ«åã€‚è¦ç¨åå¼•ç”¨è¿™äº›"rows"ï¼Œå¯ä»¥ä½¿ç”¨[`cy.get()`](/api/commands/get)å‘½ä»¤ã€‚

```javascript
// Cypressè¿”å›<tr>çš„å¼•ç”¨
// å…è®¸æˆ‘ä»¬ç»§ç»­é“¾å¼è°ƒç”¨å‘½ä»¤
// æ‰¾åˆ°ç¬¬ä¸€è¡Œ
cy.get('@rows').first().click()
```

å› ä¸ºåœ¨[`cy.get()`](/api/commands/get)ä¸­ä½¿ç”¨äº†`@`å­—ç¬¦ï¼Œå®ƒä¸ä¼šæŸ¥è¯¢DOMå…ƒç´ ï¼Œè€Œæ˜¯æŸ¥æ‰¾åä¸º`rows`çš„ç°æœ‰åˆ«åå¹¶è¿”å›å¼•ç”¨ï¼ˆå¦‚æœæ‰¾åˆ°ï¼‰ã€‚

#### è¿‡æ—¶å…ƒç´ :

åœ¨è®¸å¤šå•é¡µåº”ç”¨ä¸­ï¼ŒJavaScriptä¼šä¸æ–­é‡æ–°æ¸²æŸ“éƒ¨åˆ†DOMã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è·å–åˆ«åæ—¶æ€»æ˜¯é‡æ–°è¿è¡ŒæŸ¥è¯¢ï¼Œç¡®ä¿ä½ ä¸ä¼šå¾—åˆ°è¿‡æ—¶å…ƒç´ ã€‚

```html
<ul id="todos">
  <li>
    é›ç‹—
    <button class="edit">ç¼–è¾‘</button>
  </li>
  <li>
    å–‚çŒ«
    <button class="edit">ç¼–è¾‘</button>
  </li>
</ul>
```

å‡è®¾ç‚¹å‡»`.edit`æŒ‰é’®æ—¶ï¼Œ`<li>`ä¼šåœ¨DOMä¸­é‡æ–°æ¸²æŸ“ã€‚ä¸å†æ˜¾ç¤ºç¼–è¾‘æŒ‰é’®ï¼Œè€Œæ˜¯æ˜¾ç¤º`<input />`æ–‡æœ¬æ¡†è®©ä½ ç¼–è¾‘å¾…åŠé¡¹ã€‚ä¹‹å‰çš„`<li>`å·²å®Œå…¨ä»DOMç§»é™¤ï¼Œæ–°çš„`<li>`æ¸²æŸ“åœ¨å®ƒçš„ä½ç½®ã€‚

```javascript
cy.get('[data-testid="todos"] li').first().as('firstTodo')

cy.get('@firstTodo').find('.edit').click()

cy.get('@firstTodo')
  .should('have.class', 'editing')
  .find('input')
  .type('æ¸…ç†å¨æˆ¿')
```

æ¯æ¬¡å¼•ç”¨`@firstTodo`æ—¶ï¼ŒCypressä¼šé‡æ–°è¿è¡Œå®šä¹‰åˆ«åçš„æŸ¥è¯¢ã€‚

æœ¬ä¾‹ä¸­ä¼šé‡æ–°æŸ¥è¯¢DOMï¼š`cy.get('#todos li').first()`ã€‚å› ä¸ºèƒ½æ‰¾åˆ°æ–°çš„`<li>`ï¼Œä¸€åˆ‡æ­£å¸¸ã€‚

:::caution

_é€šå¸¸_ï¼Œé‡æ”¾ä¹‹å‰çš„å‘½ä»¤ä¼šè¿”å›é¢„æœŸç»“æœï¼Œä½†ä¸æ€»æ˜¯å¦‚æ­¤ã€‚å»ºè®®**åœ¨è¿è¡Œå‘½ä»¤å‰åˆ›å»ºåˆ«å**ã€‚

- `cy.get('nav').find('header').find('[data-testid="user"]').as('user').click()`
  <Icon name="check-circle" color="green" /> (æ­£ç¡®)
- `cy.get('nav').find('header').find('[data-testid="user"]').click().as('user')`
  <Icon name="exclamation-triangle" color="red" /> (é”™è¯¯)

:::

### æ‹¦æˆª

åˆ«åä¹Ÿå¯ç”¨äº[cy.intercept()](/api/commands/intercept)ã€‚ä¸ºæ‹¦æˆªçš„è·¯ç”±åˆ›å»ºåˆ«åå¯ä»¥ï¼š

- ç¡®ä¿åº”ç”¨å‘å‡ºé¢„æœŸè¯·æ±‚
- ç­‰å¾…æœåŠ¡å™¨å‘é€å“åº”
- è®¿é—®å®é™…è¯·æ±‚å¯¹è±¡è¿›è¡Œæ–­è¨€

<DocsImage
  src="/img/app/core-concepts/aliasing-routes.png"
  alt="åˆ«åå‘½ä»¤"
/>

è¿™æ˜¯ä¸ºæ‹¦æˆªè·¯ç”±åˆ›å»ºåˆ«åå¹¶ç­‰å¾…å®Œæˆçš„ä¾‹å­ã€‚

```js
cy.intercept('POST', '/users', { id: 123 }).as('postUser')

cy.get('form').submit()

cy.wait('@postUser').then(({ request }) => {
  expect(request.body).to.have.property('name', 'Brian')
})

cy.contains('æˆåŠŸåˆ›å»ºç”¨æˆ·: Brian')
```

:::info

<strong>Cypressæ–°æ‰‹?</strong>

[æˆ‘ä»¬æœ‰ä¸€ä»½æ›´è¯¦ç»†å…¨é¢çš„ç½‘ç»œè¯·æ±‚è·¯ç”±æŒ‡å—ã€‚](/app/guides/network-requests)

:::

### è¯·æ±‚

åˆ«åä¹Ÿå¯ç”¨äº[è¯·æ±‚](/api/commands/request)ã€‚

è¿™æ˜¯ä¸ºè¯·æ±‚åˆ›å»ºåˆ«åå¹¶ç¨åè®¿é—®å…¶å±æ€§çš„ä¾‹å­ã€‚

```js
cy.request('https://jsonplaceholder.cypress.io/comments').as('comments')

// å…¶ä»–æµ‹è¯•ä»£ç 

cy.get('@comments').should((response) => {
  if (response.status === 200) {
      expect(response).to.have.property('duration')
    } else {
      // ä½ æƒ³æ£€æŸ¥çš„ä»»ä½•å†…å®¹
    }
  })
})
```

### åˆ«ååœ¨æ¯ä¸ªæµ‹è¯•å‰é‡ç½®

**æ³¨æ„:** æ‰€æœ‰åˆ«ååœ¨æ¯ä¸ªæµ‹è¯•å‰éƒ½ä¼šé‡ç½®ã€‚å¸¸è§é”™è¯¯æ˜¯åœ¨`before`é’©å­ä¸­åˆ›å»ºåˆ«åã€‚è¿™ç§åˆ«ååªåœ¨ç¬¬ä¸€ä¸ªæµ‹è¯•ä¸­æœ‰æ•ˆï¼

```js
// ğŸš¨ è¿™ä¸ªä¾‹å­ä¸å·¥ä½œ
before(() => {
  // æ³¨æ„è¿™ä¸ªåˆ«ååªé€šè¿‡"before"é’©å­åˆ›å»ºä¸€æ¬¡
  cy.wrap('some value').as('exampleValue')
})

it('åœ¨ç¬¬ä¸€ä¸ªæµ‹è¯•ä¸­æœ‰æ•ˆ', () => {
  cy.get('@exampleValue').should('equal', 'some value')
})

// æ³¨æ„ç¬¬äºŒä¸ªæµ‹è¯•ä¼šå¤±è´¥ï¼Œå› ä¸ºåˆ«åå·²é‡ç½®
it('åœ¨ç¬¬äºŒä¸ªæµ‹è¯•ä¸­ä¸å­˜åœ¨', () => {
  // æ²¡æœ‰åˆ«åå› ä¸ºå®ƒåªåœ¨ç¬¬ä¸€ä¸ªæµ‹è¯•å‰åˆ›å»º
  // åœ¨ç¬¬äºŒä¸ªæµ‹è¯•å‰å·²é‡ç½®
  cy.get('@exampleValue').should('equal', 'some value')
})
```

è§£å†³æ–¹æ¡ˆæ˜¯åœ¨æ¯ä¸ªæµ‹è¯•å‰ä½¿ç”¨`beforeEach`é’©å­åˆ›å»ºåˆ«å

```js
// âœ… æ­£ç¡®ç¤ºä¾‹
beforeEach(() => {
  // æ¯ä¸ªæµ‹è¯•å‰åˆ›å»ºæ–°åˆ«å
  cy.wrap('some value').as('exampleValue')
})

it('åœ¨ç¬¬ä¸€ä¸ªæµ‹è¯•ä¸­æœ‰æ•ˆ', () => {
  cy.get('@exampleValue').should('equal', 'some value')
})

it('åœ¨ç¬¬äºŒä¸ªæµ‹è¯•ä¸­ä¹Ÿæœ‰æ•ˆ', () => {
  cy.get('@exampleValue').should('equal', 'some value')
})
```