---
title: 'Bitbucket 集成 | Cypress 文档'
description: '配置 Bitbucket 状态检查和拉取请求评论，以显示来自 Cypress Cloud 的测试结果。'
sidebar_position: 30
sidebar_label: Bitbucket
---

<ProductHeading product="cloud" />

# Bitbucket

:::info

##### <Icon name="question-circle" color="#4BBFD2" /> 你将学到

- 如何安装 Cypress Bitbucket 集成
- 如何配置状态检查和拉取请求评论

:::

[Cypress Cloud](https://on.cypress.io/cloud) 可以通过[状态检查](#Status-checks)和[拉取请求评论](#Pull-Request-comments)将你的 Cypress 测试与 Bitbucket 工作流集成。项目首先需要[设置为记录](/cloud/account-management/projects)到 Cypress Cloud 才能使用 Bitbucket 集成。

<DocsImage
  src="/img/cloud/integrations/bitbucket/bitbucket-merge-request-comment.jpg"
  alt="Bitbucket 合并请求评论"
  width={800}
/>

:::caution

Bitbucket 集成依赖于你的 CI 环境可靠地提供提交 SHA（通常通过环境变量）。这对大多数用户来说不是问题，但如果你在使用 CI 设置时遇到 Bitbucket 集成问题，请确保按照[这些指南](/app/continuous-integration/overview#Git-information)正确发送 git 信息。如果之后仍然遇到问题，请[联系我们](mailto:hello@cypress.io)。

:::

## 安装 Bitbucket 集成

:::caution

Bitbucket OAuth2 应用程序将允许 Cypress Cloud 以注册应用程序的用户身份进行认证。这意味着 Cypress 将能够访问你有权限的所有 Bitbucket 仓库。如果你想更严格地控制 Cypress 可见的仓库，可以考虑在 Bitbucket 中创建一个访问权限更有限的服务账户。

:::

1. 在 Cypress Cloud 中访问 **Integrations**。
1. 点击 **Install Bitbucket Integration**。
1. （仅限测试版）你需要为你的用户账户启用 Bitbucket 的[开发模式](https://support.atlassian.com/bitbucket-cloud/docs/enable-bitbucket-cloud-development-mode/)才能继续。
1. 在弹出窗口中继续完成 Bitbucket OAuth 安装流程。
1. 安装完成后，将你的项目连接到 Bitbucket 仓库。
1. （可选）为每个项目配置行为。

## 配置 Bitbucket 集成

### 状态检查

默认情况下，Cypress 会发布一个 **cypress/run** 提交状态，包含 Cypress 运行的结果。这将阻止你的团队合并任何有 Cypress 测试失败的 PR。

此外，Cypress 可以发布一个 **cypress/flake** 提交状态，指示 Cypress 运行是否包含任何不稳定的测试。这将阻止你的团队合并任何有不稳定测试的 PR。

你可以在项目的 **Project Settings** 页面管理此行为。

### 拉取请求评论

默认情况下，Cypress 会在运行完成时发布一个 PR 评论，总结运行情况。它将包括测试结果、运行信息和失败或不稳定测试的摘要。

你可以在项目的 **Project Settings** 页面管理此行为。

<TestReplayInfo />

## 卸载 Bitbucket 集成

你可以通过访问组织的 **Integrations → Bitbucket** 页面来移除此集成。这将停止所有来自 Cypress 的状态检查和 PR 评论。