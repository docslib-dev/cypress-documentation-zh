---
title: 'Cypress API: 目录'
description: 'Cypress命令、断言、操作及其他辅助编写测试的命令。'
sidebar_label: '目录'
sidebar_position: 10
---

<ProductHeading product="app" />

# 目录

## 命令

Cypress命令在被调用时不会立即执行，而是将自己加入队列稍后运行。命令可以链式调用，因为Cypress会为你管理一个Promise链，每个命令都会将"subject"传递给下一个命令，直到链结束或遇到错误。

了解更多关于命令链式调用的内容，请参阅[命令链介绍](/app/core-concepts/introduction-to-cypress#Chains-of-Commands)。

Cypress命令可分为以下几类：

- `query` - 读取应用程序状态的命令
- `assertion` - 对给定状态进行断言的命令
- `action` - 像用户一样与应用程序交互的命令
- `other` - 其他对编写测试有帮助的命令

查询命令与其他命令的区别在[重试能力指南](/app/core-concepts/retry-ability)中有详细说明。

### 查询命令

查询命令是读取应用程序状态的Cypress命令。它们返回一个subject供后续命令操作或断言，并根据需要重试以确保它们返回的DOM元素或其他数据始终是最新的。

| 命令                                         | 用途                                                                                                      |
| ----------------------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| [`.as()`](/api/commands/as)                     | 为后续使用分配别名。稍后可以在`cy.get()`查询或`cy.wait()`命令中引用该别名。 |
| [`.children()`](/api/commands/children)         | 获取一组DOM元素中每个元素的子元素。                                             |
| [`.closest()`](/api/commands/closest)           | 获取与选择器匹配的第一个祖先元素。                                                   |
| [`.contains()`](/api/commands/contains)         | 通过文本内容选择DOM元素。                                                                      |
| [`.document()`](/api/commands/document)         | 获取活动页面的`window.document`。                                                              |
| [`.eq()`](/api/commands/eq)                     | 通过索引从集合中选择DOM元素。                                                           |
| [`.filter()`](/api/commands/filter)             | 使用选择器过滤元素。                                                                           |
| [`.find()`](/api/commands/find)                 | 使用选择器查找后代元素。                                                                  |
| [`.first()`](/api/commands/first)               | 选择集合中的第一个项目。                                                                     |
| [`.focused()`](/api/commands/focused)           | 获取当前获得焦点的DOM元素。                                                             |
| [`.get()`](/api/commands/get)                   | 通过选择器查找DOM元素，或读取之前使用`.as()`命令创建的别名。               |
| [`.hash()`](/api/commands/hash)                 | 获取活动页面的URL哈希值。                                                                       |
| [`.invoke()`](/api/commands/invoke)             | 对之前返回的subject调用函数。                                                       |
| [`.its()`](/api/commands/its)                   | 获取之前返回的subject的属性值。                                                  |
| [`.last()`](/api/commands/last)                 | 选择集合中的最后一个项目。                                                                      |
| [`.location()`](/api/commands/location)         | 获取活动页面的`window.location`对象。                                                       |
| [`.next()`](/api/commands/next)                 | 获取下一个兄弟元素。                                                                              |
| [`.nextAll()`](/api/commands/nextall)           | 获取所有后续兄弟元素。                                                                        |
| [`.nextUntil()`](/api/commands/nextuntil)       | 获取所有后续兄弟元素直到匹配选择器为止。                                              |
| [`.not()`](/api/commands/not)                   | 使用选择器过滤选中的元素。                                                                  |
| [`.parent()`](/api/commands/parent)             | 获取DOM元素的父元素。                                                                           |
| [`.parents()`](/api/commands/parents)           | 获取DOM元素的所有父元素。                                                                  |
| [`.parentsUntil()`](/api/commands/parentsuntil) | 获取所有父元素直到匹配选择器为止。                                                                  |
| [`.prev()`](/api/commands/prev)                 | 获取前一个兄弟元素。                                                                          |
| [`.prevAll()`](/api/commands/prevall)           | 获取所有前一个兄弟元素。                                                                         |
| [`.prevUntil()`](/api/commands/prevuntil)       | 获取所有前一个兄弟元素直到匹配选择器为止。                                     |
| [`.root()`](/api/commands/root)                 | 获取根DOM元素。                                                                                  |
| [`.shadow()`](/api/commands/shadow)             | 遍历进入元素的shadow DOM。                                                                |
| [`.siblings()`](/api/commands/siblings)         | 获取所有兄弟元素。                                                                                  |
| [`.title()`](/api/commands/title)               | 获取活动页面的`document.title`属性。                                                      |
| [`.url()`](/api/commands/url)                   | 获取活动页面的URL。                                                                            |
| [`.window()`](/api/commands/window)             | 获取活动页面的`window`对象。                                                                |

### 断言命令

断言命令是对应用程序状态进行断言的Cypress命令。它们会暂停测试直到满足给定条件或超时。了解更多关于Cypress断言的内容，请参阅[断言介绍](/app/core-concepts/introduction-to-cypress#Assertions)和[断言参考](/app/references/assertions)。

| 命令                             | 用途                                                                                                      |
| ----------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| [`.and()`](/api/commands/and)       | `.should()`的别名。对应用程序状态进行断言。                                            |
| [`.should()`](/api/commands/should) | 对应用程序状态进行断言。断言会自动重试直到通过或超时。 |

### 操作命令

操作命令是像用户一样与应用程序交互的Cypress命令。它们会等待元素可操作后再与页面交互。

了解更多关于操作命令的内容，请参阅[可操作性指南](/app/core-concepts/interacting-with-elements)。

| 命令                                             | 用途                                                                                    |
| --------------------------------------------------- | ---------------------------------------------------------------------------------------- |
| [`.check()`](/api/commands/check)                   | 勾选复选框或单选按钮元素。                                                        |
| [`.clear()`](/api/commands/clear)                   | 清除输入框或文本区域的值。                                                 |
| [`.click()`](/api/commands/click)                   | 点击DOM元素。                                                                     |
| [`.dblclick()`](/api/commands/dblclick)             | 双击DOM元素。                                                              |
| [`.rightclick()`](/api/commands/rightclick)         | 右键点击DOM元素。                                                               |
| [`.scrollIntoView()`](/api/commands/scrollintoview) | 将元素滚动到视图中。                                                             |
| [`.scrollTo()`](/api/commands/scrollto)             | 滚动到特定位置。                                                           |
| [`.select()`](/api/commands/select)                 | 选择`<select>`中的`<option>`。                                                |
| [`.selectFile()`](/api/commands/selectfile)         | 在HTML5输入元素中选择文件，或模拟将文件拖入浏览器。 |
| [`.trigger()`](/api/commands/trigger)               | 触发DOM元素上的事件。                                                       |
| [`.type()`](/api/commands/type)                     | 在DOM元素中输入内容。                                                                 |
| [`.uncheck()`](/api/commands/uncheck)               | 取消勾选复选框。                                                                    |

### 其他命令

Cypress提供了多种辅助编写测试的额外命令。

| 命令                                                             | 用途                                                                                                                                                                           |
| ------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [`.blur()`](/api/commands/blur)                                     | 使焦点元素失去焦点。Blur不是一个操作命令，因为用户不能直接使元素失去焦点，只能聚焦新元素，但`.blur()`可以作为测试快捷方式使用。 |
| [`.clearAllCookies()`](/api/commands/clearallcookies)               | 清除所有浏览器cookie。                                                                                                                                                      |
| [`.clearAllLocalStorage()`](/api/commands/clearalllocalstorage)     | 清除测试交互过的所有源的`localStorage`数据。                                                                                                   |
| [`.clearAllSessionStorage()`](/api/commands/clearallsessionstorage) | 清除测试交互过的所有源的`sessionStorage`数据。                                                                                                 |
| [`.clearCookie()`](/api/commands/clearcookie)                       | 清除特定的浏览器cookie。                                                                                                                                                |
| [`.clearCookies()`](/api/commands/clearcookies)                     | 清除某个域的浏览器cookie。                                                                                                                                             |
| [`.clearLocalStorage()`](/api/commands/clearlocalstorage)           | 清除当前域和子域的`localStorage`数据。                                                                                                                  |
| [`.clock()`](/api/commands/clock)                                   | 覆盖浏览器内置的时间对象(`Date`, `setTimeout`等)，允许通过`cy.tick()`控制它们。                                                |
| [`.debug()`](/api/commands/debug)                                   | 设置`debugger`语句并记录上一个命令返回的内容。                                                                                                            |
| [`.each()`](/api/commands/each)                                     | 对数组中的每个项目调用回调函数。                                                                                                                                     |
| [`.end()`](/api/commands/end)                                       | 显式结束Cypress命令链。                                                                                                                                     |
| [`.exec()`](/api/commands/exec)                                     | 执行系统命令。                                                                                                                                                       |
| [`.fixture()`](/api/commands/fixture)                               | 从磁盘加载固定数据集。                                                                                                                                             |
| [`.focus()`](/api/commands/focus)                                   | 使DOM元素获得焦点。Focus不是一个操作命令，因为用户不能直接使元素获得焦点，但`.focus()`可以作为测试快捷方式使用。                       |
| [`.getAllCookies()`](/api/commands/getallcookies)                   | 获取所有浏览器cookie。                                                                                                                                                |
| [`.getAllLocalStorage()`](/api/commands/getalllocalstorage)         | 获取测试交互过的所有源的`localStorage`数据。                                                                                                     |
| [`.getAllSessionStorage()`](/api/commands/getallsessionstorage)     | 获取测试交互过的所有源的`sessionStorage`数据。                                                                                                   |
| [`.getCookie()`](/api/commands/getcookie)                           | 通过名称获取浏览器cookie。                                                                                                                                               |
| [`.getCookies()`](/api/commands/getcookies)                         | 获取当前域或指定域的浏览器cookie。                                                                                                               |
| [`.go()`](/api/commands/go)                                         | 使用浏览器历史记录前进或后退。                                                                                                                           |
| [`.hover()`](/api/commands/hover)                                   | Cypress没有cy.hover()命令。参见[Issue #10](https://github.com/cypress-io/cypress/issues/10)。                                                                   |
| [`.intercept()`](/api/commands/intercept)                           | 监视和存根网络请求及响应。                                                                                                                                    |
| [`.log()`](/api/commands/log)                                       | 向Cypress命令日志打印消息。                                                                                                                                     |
| [`.mount()`](/api/commands/mount)                                   | 为Cypress组件测试挂载组件。                                                                                                                                |
| [`.origin()`](/api/commands/origin)                                 | 在单个测试中访问不同源的多个域。                                                                                                                             |
| [`.pause()`](/api/commands/pause)                                   | 暂停测试执行，允许与被测应用程序交互后再继续。                                                                                                                     |
| [`.press()`](/api/commands/press)                                   | 触发应用程序中的原生键盘事件以模拟真实用户键盘交互。                                                                                      |
| [`.readFile()`](/api/commands/readfile)                             | 从磁盘读取文件。                                                                                                                                                  |
| [`.reload()`](/api/commands/reload)                                 | 重新加载页面。                                                                                                                                                  |
| [`.request()`](/api/commands/request)                               | 发起HTTP请求。                                                                                                                                                   |
| [`.screenshot()`](/api/commands/screenshot)                         | 对被测应用程序进行截图。                                                                                                                                |
| [`.session()`](/api/commands/session)                               | 缓存和恢复cookie、localStorage和sessionStorage(即会话数据)，以便在测试之间重建一致的浏览器上下文。                                |
| [`.setCookie()`](/api/commands/setcookie)                           | 设置浏览器cookie。                                                                                                                                               |
| [`.spread()`](/api/commands/spread)                                 | 使用多个参数调用回调函数。类似于`.then()`。                                                                                                       |
| [`.spy()`](/api/commands/spy)                                       | 包装方法为spy以记录函数调用。                                                                                                                                |
| [`.stub()`](/api/commands/stub)                                     | 替换方法，记录其使用并控制其行为。                                                                                                                              |
| [`.submit()`](/api/commands/submit)                                 | 提交表单。                                                                                                                                                  |
| [`.task()`](/api/commands/task)                                     | 通过`task`插件事件在Node中执行代码。                                                                                                                               |
| [`.then()`](/api/commands/then)                                     | 使用当前subject调用回调函数，允许在Cypress测试的特定点执行代码。                                                     |
| [`.tick()`](/api/commands/tick)                                     | 在用`cy.clock()`覆盖原生时间函数后移动时间。                                                                                                           |
| [`.viewport()`](/api/commands/viewport)                             | 控制应用程序屏幕的大小和方向。                                                                                                                              |
| [`.visit()`](/api/commands/visit)                                   | 访问远程URL。许多测试以此命令开始。                                                                                                                         |
| [`.wait()`](/api/commands/wait)                                     | 等待指定的毫秒数，或等待别名资源解析。                                                                                                      |
| [`.within()`](/api/commands/within)                                 | 将后续所有cy命令限定在此元素内。在处理特定元素组(如`<form>`)时非常有用。                                         |
| [`.wrap()`](/api/commands/wrap)                                     | 返回传入`.wrap()`的对象。如果对象是promise，则返回其解析值。                                                                                   |
| [`.writeFile()`](/api/commands/writefile)                           | 向文件写入指定内容。                                                                                                                                    |

## Cypress API

### 事件

Cypress在浏览器中运行时发出的一系列事件。这些事件不仅对控制应用程序行为有用，也对调试有帮助。了解更多内容，请参阅[事件目录](/api/cypress-api/catalog-of-events)。

### 自定义命令和查询

Cypress提供了编写[自定义命令](/api/cypress-api/custom-commands)和[自定义查询](/api/cypress-api/custom-queries)的接口。详见相关页面。

Cypress社区已经创建了大量<a href="/app/plugins/plugins-list#custom-commands">命令插件</a>，你可以安装或下载使用。

### API

Cypress在全局`Cypress`对象上暴露了许多属性和方法。

Cypress API与Cypress命令的关键区别在于，Cypress API在被调用时立即执行，而不是排队稍后运行。

| 属性                                                                 | 用途                                                                                                                          |
| ------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------ |
| [`Cypress.arch`](/api/cypress-api/arch)                                  | 底层操作系统的CPU架构名称，由Node的`os.arch()`返回。                                               |
| [`Cypress.browser`](/api/cypress-api/browser)                            | 当前浏览器的信息，如浏览器家族和版本。                                                     |
| [`Cypress.Commands`](/api/cypress-api/custom-commands)                   | 创建新的自定义命令并扩展或覆盖现有命令。                                                               |
| [`Cypress.config()`](/api/cypress-api/config)                            | 从测试内部获取和设置Cypress配置。                                                                      |
| [`Cypress.Cookies.debug()`](/api/cypress-api/cookies)                    | 每当cookie被修改时生成控制台日志。                                                                           |
| [`Cypress.currentRetry`](/api/cypress-api/currentretry)                  | 表示当前测试重试次数的数字。                                                                            |
| [`Cypress.currentTest`](/api/cypress-api/currenttest)                    | 包含当前执行测试信息的对象。                                                                 |
| [`Cypress.log`](/api/cypress-api/cypress-log)                            | 控制打印到命令日志内容的内部API。在编写自定义命令时非常有用。   |
| [`Cypress.dom`](/api/cypress-api/dom)                                    | 一系列与DOM相关的辅助方法。                                                                                    |
| [`Cypress.env`](/api/cypress-api/env)                                    | 从测试内部获取环境变量。                                                                              |
| [`Cypress.isBrowser()`](/api/cypress-api/isbrowser)                      | 检查当前浏览器是否匹配给定名称或过滤器。                                                                |
| [`Cypress.isCy()`](/api/cypress-api/iscy)                                | 检查变量是否是cy或cy链的有效实例。                                                              |
| [`Cypress.Keyboard.defaults()`](/api/cypress-api/keyboard-api)           | 设置`.type()`命令执行的默认值。                                                                  |
| [`Cypress.platform`](/api/cypress-api/platform)                          | 底层操作系统名称，由Node的`os.platform()`返回。                                                                |
| [`Cypress.require`](/api/cypress-api/require)                            | 在[cy.origin()](/api/commands/origin)回调函数中使用依赖项。                               |
| [`Cypress.Screenshot.defaults()`](/api/cypress-api/screenshot-api)       | 设置`.screenshot()`命令和测试失败时自动截图捕获的默认值。 |
| [`Cypress.SelectorPlayground`](/api/cypress-api/selector-playground-api) | 配置[选择器游乐场](/app/core-concepts/open-mode#Selector-Playground)使用的选项。                         |
| [`Cypress.session`](/api/cypress-api/session)                            | 与`.session()`命令相关的辅助方法集合。                                                            |
| [`Cypress.spec`](/api/cypress-api/spec)                                  | 包含当前执行规范文件信息的对象。                                                            |
| [`Cypress.testingType`](/api/cypress-api/testing-type)                   | 当前测试类型，例如`"e2e"`或`"component"`。                                                                         |
| [`Cypress.version`](/api/cypress-api/version)                            | 当前Cypress版本。                                                                                                   |

## 实用工具

Cypress直接在全局`Cypress`对象上提供了几个常用库。

| 实用工具                                         | 用途                                                                                                                                    |
| ----------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| [`Cypress.$`](/api/utilities/$)                 | Cypress自动包含[jQuery](http://jquery.com/)并将其暴露为`Cypress.$`。                                               |
| [`Cypress.Blob`](/api/utilities/blob)           | Cypress自动包含[Blob](https://github.com/nolanlawson/blob-util)库并将其暴露为`Cypress.Blob`。              |
| [`Cypress.Buffer`](/api/utilities/buffer)       | Cypress自动包含浏览器的[Buffer polyfill](https://github.com/feross/buffer)并将其暴露为`Cypress.Buffer`。 |
| [`Cypress._`](/api/utilities/_)                 | Cypress自动包含[lodash](https://lodash.com/)并将其暴露为`Cypress._`。                                              |
| [`Cypress.minimatch`](/api/utilities/minimatch) | Cypress自动包含[minimatch](https://github.com/isaacs/minimatch)并将其暴露为`Cypress.minimatch`。                   |
| [`Cypress.Promise`](/api/utilities/promise)     | Cypress自动包含`Bluebird`并将其暴露为`Cypress.Promise`。                                                           |
| [`Cypress.sinon`](/api/utilities/sinon)         | Cypress自动包含[Sinon.JS](http://sinonjs.org/)并将其暴露为`Cypress.sinon`。                                        |

## Node事件

Node事件允许你钩入并扩展Cypress行为。更多细节，请参阅[如何使用插件](/app/plugins/plugins-guide)和[Node事件概述](/api/node-events/overview)。

| API                                                             | 用途                                                                                                                                                                                                                                                                    |
| --------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| [After Run Event](/api/node-events/after-run-api)               | `after:run`事件在运行结束后触发。通过cypress open运行cypress时，事件将在关闭项目时触发。                                                                                                                                  |
| [After Screenshot Event](/api/node-events/after-screenshot-api) | 截图后，你可以通过`after:screenshot`插件事件获取其详细信息。                                                                                                                                                                       |
| [After Spec Event](/api/node-events/after-spec-api)             | `after:spec`事件在规范文件运行后触发。通过cypress open运行cypress时，事件将在浏览器关闭时触发。                                                                                                                               |
| [Before Run Event](/api/node-events/before-run-api)             | `before:run`事件在运行开始前触发。通过cypress open运行cypress时，事件将在打开项目时触发。                                                                                                                                     |
| [Before Spec Event](/api/node-events/before-spec-api)           | `before:spec`事件在规范文件运行前触发。通过cypress open运行cypress时，事件将在浏览器启动时触发。                                                                                                                           |
| [Browser Launch API](/api/node-events/browser-launch-api)       | 在Cypress启动浏览器前，它给你机会修改浏览器首选项、安装扩展、添加和删除命令行参数，以及从[`setupNodeEvents`](/app/plugins/plugins-guide#Using-a-plugin)函数修改其他选项。 |
| [Configuration API](/api/node-events/configuration-api)         | Cypress允许你从Cypress配置中动态修改配置值和环境变量。                                                                                                                                                |
| [Preprocessors API](/api/node-events/preprocessors-api)         | 预处理器是负责为浏览器准备支持文件或测试文件的插件。预处理器通常还会监视源文件的更改，重新处理它们，然后通知Cypress重新运行测试。                           |