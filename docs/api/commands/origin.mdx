---
title: 'origin | Cypress æ–‡æ¡£'
description: åœ¨Cypressæµ‹è¯•ä¸­è®¿é—®å¤šä¸ªä¸åŒæºçš„åŸŸåã€‚
sidebar_label: origin
e2eSpecific: true
---

<ProductHeading product="app" />

# origin

åœ¨å•ä¸ªæµ‹è¯•ä¸­è®¿é—®å¤šä¸ªä¸åŒ[æº](https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy#definition_of_an_origin)çš„ç½‘ç«™ã€‚

é€šå¸¸æƒ…å†µä¸‹ï¼Œå•ä¸ªCypressæµ‹è¯•åªèƒ½åœ¨å•ä¸€æºä¸­è¿è¡Œå‘½ä»¤ï¼Œè¿™æ˜¯ç”±æµè§ˆå™¨çš„æ ‡å‡†Webå®‰å…¨ç‰¹æ€§å†³å®šçš„é™åˆ¶ã€‚`cy.origin()`å‘½ä»¤å…è®¸ä½ çš„æµ‹è¯•ç»•è¿‡è¿™ä¸€é™åˆ¶ã€‚

:::caution

<Icon name="exclamation-triangle" /> **é˜»ç¢æ€§ç¬¬ä¸‰æ–¹ä»£ç **

é»˜è®¤æƒ…å†µä¸‹ï¼ŒCypressä¼šä»æœåŠ¡å™¨è¿”å›çš„ç¬¬ä¸€æ–¹`.html`å’Œ`.js`æ–‡ä»¶å“åº”æµä¸­æœç´¢å¹¶æ›¿æ¢å¸¸è§çš„æ¡†æ¶ç ´åä»£ç æ¨¡å¼ã€‚ä½¿ç”¨`cy.origin()`å‘½ä»¤æ—¶ï¼Œç¬¬ä¸‰æ–¹ä»£ç å¯èƒ½ä¹Ÿéœ€è¦é’ˆå¯¹æ¡†æ¶ç ´åæŠ€æœ¯è¿›è¡Œä¿®æ”¹ã€‚å¯ä»¥é€šè¿‡åœ¨Cypressé…ç½®ä¸­å°†[`experimentalModifyObstructiveThirdPartyCode`](/app/references/experiments)æ ‡å¿—è®¾ç½®ä¸º`true`æ¥å¯ç”¨æ­¤åŠŸèƒ½ã€‚å…³äºè¿™ä¸ªå®éªŒæ€§æ ‡å¿—çš„æ›´å¤šä¿¡æ¯å¯ä»¥åœ¨æˆ‘ä»¬çš„[è·¨æºæµ‹è¯•](/app/guides/cross-origin-testing#Modifying-Obstructive-Third-Party-Code)æ–‡æ¡£ä¸­æ‰¾åˆ°ã€‚

:::

:::info

<strong>Cypress [v14.0.0](/app/references/changelog#14-0-0)ä¸­çš„å˜æ›´</strong>

Cypressé»˜è®¤ä¸å†æ³¨å…¥`document.domain`ï¼Œè¿™æ„å‘³ç€ç°åœ¨å¿…é¡»åœ¨åŒä¸€æµ‹è¯•ä¸­ä½¿ç”¨`cy.origin()`æ¥å¯¼èˆªä»»æ„ä¸¤ä¸ªæºï¼Œå³ä½¿è¿™ä¸¤ä¸ªæºå±äºåŒä¸€ä¸ªè¶…çº§åŸŸåã€‚
å¯ä»¥é€šè¿‡å°†[injectDocumentDomain](/app/references/configuration#injectDocumentDomain)é…ç½®é€‰é¡¹è®¾ç½®ä¸º`true`æ¥ç¦ç”¨æ­¤è¡Œä¸ºï¼Œä»¥ä¾¿å¹³æ»‘è¿‡æ¸¡æµ‹è¯•åˆ°æ–°è¡Œä¸ºã€‚
æ­¤é…ç½®é€‰é¡¹å°†åœ¨æœªæ¥çš„Cypressç‰ˆæœ¬ä¸­ç§»é™¤ã€‚

:::

## è¯­æ³•

```js
cy.origin(url, callbackFn)
cy.origin(url, options, callbackFn)
```

### ç”¨æ³•

<Icon name="check-circle" color="green" /> **æ­£ç¡®ç”¨æ³•**

```js
const hits = getHits() // åœ¨å…¶ä»–åœ°æ–¹å®šä¹‰
// åœ¨æ¬¡è¦æºä¸­è¿è¡Œå‘½ä»¤ï¼Œä¼ å…¥å¯åºåˆ—åŒ–çš„å€¼
cy.origin('https://example.cypress.io', { args: { hits } }, ({ hits }) => {
  // å›è°ƒå†…éƒ¨baseUrlä¸ºhttps://example.cypress.io
  cy.visit('/history/founder')
  // å‘½ä»¤åœ¨æ¬¡è¦æºä¸­æ‰§è¡Œ
  cy.get('h1').contains('About our Founder')
  // é€šè¿‡å›è°ƒå‚æ•°è®¿é—®ä¼ å…¥çš„å€¼
  cy.get('#hitcounter').contains(hits)
})
// å³ä½¿æˆ‘ä»¬åœ¨æ¬¡è¦æºå—å¤–éƒ¨ï¼Œ
// ä»ç„¶åœ¨cypress.ioä¸Šï¼Œæ‰€ä»¥è¿”å›baseUrl
cy.visit('/')
// ç»§ç»­åœ¨ä¸»æºä¸Šè¿è¡Œå‘½ä»¤
cy.get('h1').contains('My cool site under test')
```

<Icon name="exclamation-triangle" color="red" /> **é”™è¯¯ç”¨æ³•**

```js
const hits = getHits()
cy.visit('https://example.cypress.io/history/founder')
// è¦ä¸è·¨æºå†…å®¹äº¤äº’ï¼Œå°†æ­¤ç§»åˆ°cy.origin()å›è°ƒå†…éƒ¨
cy.get('h1').contains('Kitchen Sink')
// æºå¿…é¡»ç²¾ç¡®åŒ¹é…ï¼ŒåŒ…æ‹¬åè®®ã€å­åŸŸåå’Œç«¯å£ï¼Œä¾‹å¦‚https://www.cypress.io
cy.origin('https://www.cypress.io', () => {
  cy.visit('/about-us')
  cy.get('h1').contains('About us')
  // å¤±è´¥ï¼Œå› ä¸ºdownloadsæœªé€šè¿‡argsä¼ å…¥
  cy.contains(downloads)
})
// ä¸ä¼šå·¥ä½œï¼Œå› ä¸ºä»åœ¨www.cypress.ioä¸Š
cy.get('h1').contains('Kitchen Sink')
```

### å‚æ•°

<Icon name="angle-right" /> **origin _(String)_**

æŒ‡å®šå›è°ƒæ‰§è¡Œæºçš„å­—ç¬¦ä¸²ã€‚è‡³å°‘åº”åŒ…å«ä¸»æœºåã€‚ä¹Ÿå¯ä»¥åŒ…å«åè®®å’Œç«¯å£å·ã€‚å¯ä»¥åŒ…å«è·¯å¾„ï¼Œä½†ä¸æ˜¯å¿…éœ€çš„ã€‚ä¸»æœºåå¿…é¡»ç²¾ç¡®åŒ¹é…æ¬¡è¦æºï¼ŒåŒ…æ‹¬æ‰€æœ‰å­åŸŸåã€‚ä¸æ”¯æŒæŸ¥è¯¢å‚æ•°ã€‚å¦‚æœæœªæä¾›åè®®ï¼Œé»˜è®¤ä¸º`https`ã€‚

æ­¤å‚æ•°å°†ç”¨äºä¸¤ç§æ–¹å¼ï¼š

1. å®ƒå”¯ä¸€æ ‡è¯†ä¸€ä¸ªæ¬¡è¦æºï¼Œå›è°ƒä¸­çš„å‘½ä»¤å°†åœ¨å…¶ä¸­æ‰§è¡Œã€‚Cypresså°†è‡ªèº«æ³¨å…¥æ­¤æºï¼Œç„¶åå‘å…¶å‘é€ä»£ç åœ¨è¯¥æºä¸­è¯„ä¼°ï¼Œè€Œä¸ä¼šè¿åæµè§ˆå™¨çš„åŒæºç­–ç•¥ã€‚

2. å®ƒåœ¨å›è°ƒå†…éƒ¨è¦†ç›–[å…¨å±€é…ç½®](/app/references/configuration#Global)ä¸­çš„`baseUrl`ã€‚å› æ­¤`cy.visit()`å’Œ`cy.request()`å°†ä½¿ç”¨æ­¤URLä½œä¸ºå‰ç¼€ï¼Œè€Œä¸æ˜¯é…ç½®çš„`baseUrl`ã€‚

<Icon name="angle-right" /> **options _(Object)_**

ä¼ å…¥ä¸€ä¸ªé€‰é¡¹å¯¹è±¡ä»¥æ§åˆ¶`cy.origin()`çš„è¡Œä¸ºã€‚

| é€‰é¡¹   | æè¿°                                                                                                                                                                                                     |
| ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| args   | çº¯JavaScriptå¯¹è±¡ï¼Œå°†è¢«åºåˆ—åŒ–å¹¶ä»ä¸»æºå‘é€åˆ°æ¬¡è¦æºï¼Œåœ¨é‚£é‡Œååºåˆ—åŒ–å¹¶ä½œä¸ºç¬¬ä¸€ä¸ªä¹Ÿæ˜¯å”¯ä¸€çš„å‚æ•°ä¼ é€’ç»™å›è°ƒå‡½æ•°ã€‚                                                                                                |

:::caution

`args`å¯¹è±¡æ˜¯**å”¯ä¸€**å¯ä»¥å°†æ•°æ®æ³¨å…¥å›è°ƒçš„æœºåˆ¶ï¼Œå›è°ƒ**ä¸æ˜¯**é—­åŒ…ï¼Œä¸ä¿ç•™å¯¹å…¶å£°æ˜æ—¶JavaScriptä¸Šä¸‹æ–‡çš„è®¿é—®æƒé™ã€‚ä¼ å…¥`args`çš„å€¼**å¿…é¡»**å¯åºåˆ—åŒ–ã€‚

:::

<Icon name="angle-right" /> **callbackFn _(Function)_**

åŒ…å«è¦åœ¨æ¬¡è¦æºä¸­æ‰§è¡Œçš„å‘½ä»¤çš„å‡½æ•°ã€‚

æ­¤å‡½æ•°å°†è¢«å­—ç¬¦ä¸²åŒ–ï¼Œå‘é€åˆ°æ¬¡è¦æºä¸­çš„Cypresså®ä¾‹å¹¶è¯„ä¼°ã€‚å¦‚æœæŒ‡å®šäº†`args`é€‰é¡¹ï¼Œååºåˆ—åŒ–çš„argså¯¹è±¡å°†ä½œä¸ºç¬¬ä¸€ä¸ªä¹Ÿæ˜¯å”¯ä¸€çš„å‚æ•°ä¼ é€’ç»™å‡½æ•°ã€‚

å›è°ƒå†…è¿è¡Œçš„å‘½ä»¤æœ‰è®¸å¤šé™åˆ¶ï¼Œè¯·å‚é˜…[å›è°ƒé™åˆ¶](#Callback-restrictions)éƒ¨åˆ†è·å–å®Œæ•´åˆ—è¡¨ã€‚

<HeaderYields />

- `cy.origin()`è¿”å›å›è°ƒå‡½æ•°ä¸­æœ€åä¸€ä¸ªCypresså‘½ä»¤äº§ç”Ÿçš„å€¼ã€‚
- å¦‚æœå›è°ƒä¸åŒ…å«ä»»ä½•Cypresså‘½ä»¤ï¼Œ`cy.origin()`è¿”å›å‡½æ•°çš„è¿”å›å€¼ã€‚
- åœ¨ä¸Šè¿°ä¸¤ç§æƒ…å†µä¸‹ï¼Œå¦‚æœå€¼ä¸å¯åºåˆ—åŒ–ï¼Œå°è¯•è®¿é—®è¿”å›çš„å€¼å°†æŠ›å‡ºé”™è¯¯ã€‚

## ç¤ºä¾‹

### åœ¨æ¬¡è¦æºä¸­ä½¿ç”¨åŠ¨æ€æ•°æ®

å›è°ƒåœ¨ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„Cypresså®ä¾‹ä¸­æ‰§è¡Œï¼Œå› æ­¤å‚æ•°å¿…é¡»é€šè¿‡[ç»“æ„åŒ–å…‹éš†ç®—æ³•](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm)ä¼ è¾“åˆ°å¦ä¸€ä¸ªå®ä¾‹ã€‚æ­¤æœºåˆ¶çš„æ¥å£æ˜¯`args`é€‰é¡¹ã€‚

```js
const sentArgs = { username: 'username', password: 'P@55w0rd!' }
cy.origin(
  'supersecurelogons.com',
  // åœ¨è¿™é‡Œå‘é€å‚æ•°...
  { args: sentArgs },
  // ...åœ¨è¿™é‡Œæ¥æ”¶å®ƒä»¬ï¼
  ({ username, password }) => {
    cy.visit('/login')
    cy.get('input#username').type(username)
    cy.get('input#password').type(password)
    cy.contains('button', 'Login').click()
  }
)
```

### è¿”å›å€¼

ä»å›è°ƒå‡½æ•°è¿”å›æˆ–äº§ç”Ÿçš„å€¼**å¿…é¡»**å¯åºåˆ—åŒ–ï¼Œå¦åˆ™å®ƒä»¬ä¸ä¼šè¿”å›åˆ°ä¸»æºã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç ä¸ä¼šå·¥ä½œï¼š

<Icon name="exclamation-triangle" color="red" /> **é”™è¯¯ç”¨æ³•**

```js
cy.origin('https://example.cypress.io', () => {
  cy.visit('/')
  cy.get('h1') // äº§ç”Ÿä¸€ä¸ªå…ƒç´ ï¼Œæ— æ³•åºåˆ—åŒ–...
}).contains('Kitchen Sink') // ...æ‰€ä»¥è¿™ä¼šå¤±è´¥
```

ç›¸åï¼Œä½ å¿…é¡»æ˜¾å¼äº§ç”Ÿä¸€ä¸ªå¯åºåˆ—åŒ–çš„å€¼ï¼š

<Icon name="check-circle" color="green" /> **æ­£ç¡®ç”¨æ³•**

```js
cy.origin('https://example.cypress.io', () => {
  cy.visit('/')
  cy.get('h1').invoke('text') // äº§ç”Ÿä¸€ä¸ªå­—ç¬¦ä¸²...
}).should('equal', 'Kitchen Sink') // ğŸ‘
```

### ä½¿ç”¨cy.visitå¯¼èˆªåˆ°æ¬¡è¦æº

å½“ä½¿ç”¨`cy.visit()`å¯¼èˆªåˆ°æ¬¡è¦æºæ—¶ï¼Œä½ å¯ä»¥åœ¨`cy.origin`å—ä¹‹å‰æˆ–ä¹‹åå¯¼èˆªã€‚è·¨æºå¯¼èˆªä¸å†æŠ›å‡ºé”™è¯¯ï¼Œä½†å½“å‘½ä»¤ä¸è·¨æºé¡µé¢äº¤äº’æ—¶ä¼šæŠ›å‡ºé”™è¯¯ã€‚

```js
// åœ¨ä¸»æºä¸­æ‰§è¡Œæ“ä½œ...

cy.origin('example.cypress.io', () => {
  // è®¿é—®https://example.cypress.io/history/founder
  cy.visit('/history/founder')
  cy.get('h1').contains('About our Founder')
})
```

è¿™é‡Œ`cy.origin()`å›è°ƒå†…éƒ¨çš„`baseUrl`è®¾ç½®ä¸º`example.cypress.io`ï¼Œåè®®é»˜è®¤ä¸º`https`ã€‚å½“è°ƒç”¨`cy.visit()`å¹¶ä¼ å…¥è·¯å¾„`/history/founder`æ—¶ï¼Œä¸‰è€…æ‹¼æ¥ä¸º`https://example.cypress.io/history/founder`ã€‚

#### æ›¿ä»£å¯¼èˆªæ–¹å¼

```js
// åœ¨ä¸»æºä¸­æ‰§è¡Œæ“ä½œ...

cy.visit('https://example.cypress.io/history/founder')

// éœ€è¦cy.originå—æ¥ä¸è·¨æºé¡µé¢äº¤äº’ã€‚
cy.origin('example.cypress.io', () => {
  cy.get('h1').contains('About our Founder')
})
```

è¿™é‡Œè·¨æºé¡µé¢åœ¨`cy.origin`å—ä¹‹å‰è®¿é—®ï¼Œä½†ä¸çª—å£çš„ä»»ä½•äº¤äº’éƒ½åœ¨å—å†…æ‰§è¡Œï¼Œè¯¥å—å¯ä»¥ä¸è·¨æºé¡µé¢é€šä¿¡ã€‚

#### <Icon name="exclamation-triangle" color="red" /> é”™è¯¯ç”¨æ³•

```js
// åœ¨ä¸»æºä¸­æ‰§è¡Œæ“ä½œ...

cy.visit('https://www.cypress.io/history/founder')

// æ­¤å‘½ä»¤å°†å¤±è´¥ï¼Œå®ƒåœ¨localhostä¸Šæ‰§è¡Œä½†åº”ç”¨ç¨‹åºåœ¨cypress.ioä¸Š
cy.get('h1').contains('About our Founder, Marvin Acme')
```

è¿™é‡Œ`cy.get('h1')`å¤±è´¥ï¼Œå› ä¸ºæˆ‘ä»¬è¯•å›¾åœ¨cy.originå—å¤–éƒ¨ä¸è·¨æºé¡µé¢äº¤äº’ï¼Œç”±äº"åŒæº"é™åˆ¶ï¼Œ"localhost"çš„JavaScriptä¸Šä¸‹æ–‡æ— æ³•ä¸"cypress.io"é€šä¿¡ã€‚

### é€šè¿‡UIå¯¼èˆªåˆ°æ¬¡è¦æº

æ”¯æŒé€šè¿‡ç‚¹å‡»ä¸»æºä¸­çš„é“¾æ¥æˆ–æŒ‰é’®å¯¼èˆªåˆ°æ¬¡è¦æºã€‚

```js
// ä¸»æºä¸­çš„æŒ‰é’®è·³è½¬åˆ°https://example.cypress.io
cy.contains('button', 'Go').click()

cy.origin('example.cypress.io', () => {
  // ä¸éœ€è¦cy.visitï¼Œå› ä¸ºæŒ‰é’®å·²å¸¦æˆ‘ä»¬åˆ°è¿™é‡Œ
  cy.get('h1').contains('CYPRESS')
})
```

### è¿ç»­å¯¼èˆªåˆ°å¤šä¸ªæ¬¡è¦æº

å›è°ƒæœ¬èº«**ä¸èƒ½**åŒ…å«`cy.origin()`è°ƒç”¨ï¼Œå› æ­¤å½“è®¿é—®å¤šä¸ªæºæ—¶ï¼Œåœ¨æµ‹è¯•çš„é¡¶å±‚è¿›è¡Œã€‚

```js
cy.origin('example.cypress.com', () => {
  cy.visit('/')
  cy.url().should('contain', 'example.cypress.com')
})

cy.origin('cypress-dx.com', () => {
  cy.visit('/')
  cy.url().should('contain', 'cypress-dx.com')
})
```

### SSOç™»å½•è‡ªå®šä¹‰å‘½ä»¤

ä¸€ä¸ªéå¸¸å¸¸è§çš„éœ€æ±‚æ˜¯åœ¨è¿è¡Œæµ‹è¯•ä¹‹å‰ç™»å½•åˆ°ç½‘ç«™ã€‚å¦‚æœç™»å½•æœ¬èº«ä¸æ˜¯æµ‹è¯•çš„ç‰¹å®šé‡ç‚¹ï¼Œæœ€å¥½å°†æ­¤åŠŸèƒ½å°è£…åœ¨`login`[è‡ªå®šä¹‰å‘½ä»¤](/api/cypress-api/custom-commands)ä¸­ï¼Œè¿™æ ·å°±ä¸å¿…åœ¨æ¯ä¸ªæµ‹è¯•ä¸­é‡å¤æ­¤ç™»å½•ä»£ç ã€‚è¿™æ˜¯ä¸€ä¸ªç†æƒ³åŒ–çš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨`cy.origin()`å®ç°è¿™ä¸€ç‚¹ã€‚

<Icon name="exclamation-triangle" color="#f0ad4e" /> **ä½æ•ˆç”¨æ³•**

```js
Cypress.Commands.add('login', (username, password) => {
  // è®°å¾—é€šè¿‡`args`ä¼ å…¥å‚æ•°
  const args = { username, password }
  cy.origin('cypress.io', { args }, ({ username, password }) => {
    // è®¿é—®https://example.cypress.com/login
    cy.visit('/login')
    cy.contains('Username').find('input').type(username)
    cy.contains('Password').find('input').type(password)
    cy.get('button').contains('Login').click()
  })
  // ç¡®è®¤æˆ‘ä»¬å›åˆ°ä¸»æºåå†ç»§ç»­
  cy.url().should('contain', '/home')
})
```

åœ¨æ¯ä¸ªæµ‹è¯•ä¹‹å‰éƒ½è¦ç»å†æ•´ä¸ªç™»å½•æµç¨‹å¹¶ä¸æ˜¯å¾ˆé«˜æ•ˆã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å¯ä»¥é€šè¿‡å°†ç™»å½•ä»£ç æ”¾åœ¨æ–‡ä»¶çš„ç¬¬ä¸€ä¸ªæµ‹è¯•ä¸­ï¼Œç„¶ååœ¨åç»­æµ‹è¯•ä¸­é‡ç”¨ç›¸åŒçš„ä¼šè¯æ¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚

ç„¶è€Œï¼Œè¿™ä¸å†å¯èƒ½ï¼Œå› ä¸ºç°åœ¨æ‰€æœ‰ä¼šè¯çŠ¶æ€åœ¨æµ‹è¯•ä¹‹é—´éƒ½ä¼šè¢«æ¸…é™¤ã€‚å› æ­¤ï¼Œä¸ºäº†é¿å…è¿™ç§å¼€é”€ï¼Œæˆ‘ä»¬å»ºè®®ä½ åˆ©ç”¨[`cy.session()`](/api/commands/session)å‘½ä»¤ï¼Œå®ƒå…è®¸ä½ è½»æ¾ç¼“å­˜ä¼šè¯ä¿¡æ¯å¹¶åœ¨æµ‹è¯•ä¹‹é—´é‡ç”¨ã€‚ç°åœ¨è®©æˆ‘ä»¬ç”¨`cy.session()`å¢å¼ºæˆ‘ä»¬çš„è‡ªå®šä¹‰ç™»å½•å‘½ä»¤ï¼Œå®ç°ä¸€ä¸ªå®Œæ•´çš„è”åˆç™»å½•æµç¨‹ï¼ŒåŒ…æ‹¬ä¼šè¯ç¼“å­˜å’ŒéªŒè¯ã€‚æ— éœ€æ¨¡æ‹Ÿï¼Œæ— éœ€å˜é€šï¼Œæ— éœ€ç¬¬ä¸‰æ–¹æ’ä»¶ï¼

```js
Cypress.Commands.add('login', (username, password) => {
  const args = { username, password }
  cy.session(
    // ç”¨æˆ·åå’Œå¯†ç ä¹Ÿå¯ä»¥ç”¨ä½œç¼“å­˜é”®
    args,
    () => {
      cy.origin('cypress.io', { args }, ({ username, password }) => {
        cy.visit('/login')
        cy.contains('Username').find('input').type(username)
        cy.contains('Password').find('input').type(password)
        cy.get('button').contains('Login').click()
      })
      cy.url().should('contain', '/home')
    },
    {
      validate() {
        cy.request('/api/user').its('status').should('eq', 200)
      },
    }
  )
})
```

## äº†è§£æ›´å¤š

### å¦‚ä½•æµ‹è¯•å¤šä¸ªæº

<DocsVideo
  src="https://youtube.com/embed/Fohrq5GZSD8"
  title="å¦‚ä½•ä½¿ç”¨Cypressæµ‹è¯•å¤šä¸ªåŸŸåæˆ–æº"
/>

åœ¨è¿™ä¸ªè§†é¢‘ä¸­ï¼Œæˆ‘ä»¬é€æ­¥ä»‹ç»å¦‚ä½•åœ¨å•ä¸ªæµ‹è¯•ä¸­æµ‹è¯•å¤šä¸ªæºã€‚æˆ‘ä»¬è¿˜çœ‹çœ‹å¦‚ä½•ä½¿ç”¨`cy.session()`å‘½ä»¤ç¼“å­˜ä¼šè¯ä¿¡æ¯å¹¶åœ¨æµ‹è¯•ä¹‹é—´é‡ç”¨ã€‚
è§†é¢‘ä¸­æåˆ°çš„é…ç½®é€‰é¡¹`experimentalSessionAndOrigin`è‡ª[Cypress 12.0.0](https://docs.cypress.io/app/references/changelog#12-0-0)èµ·ä¸å†ä½¿ç”¨ï¼Œç›¸å…³åŠŸèƒ½é»˜è®¤å¯ç”¨ã€‚

## æ³¨æ„äº‹é¡¹

### åºåˆ—åŒ–

å½“è¿›å…¥`cy.origin()`å—æ—¶ï¼ŒCypressåœ¨è¿è¡Œæ—¶å°†æ‰€æœ‰é…ç½®è®¾ç½®æ³¨å…¥åˆ°è¯·æ±‚çš„æºä¸­ï¼Œå¹¶è®¾ç½®ä¸è¯¥å®ä¾‹çš„åŒå‘é€šä¿¡ã€‚è¿™ç§åè°ƒæ¨¡å‹è¦æ±‚ä»ä¸€ä¸ªå®ä¾‹å‘é€åˆ°å¦ä¸€ä¸ªå®ä¾‹çš„ä»»ä½•æ•°æ®éƒ½å¿…é¡»[åºåˆ—åŒ–](https://developer.mozilla.org/en-US/docs/Glossary/Serialization)ä»¥è¿›è¡Œä¼ è¾“ã€‚éå¸¸é‡è¦çš„æ˜¯è¦ç†è§£å›è°ƒ**å†…éƒ¨**çš„å˜é‡ä¸ä¸å›è°ƒ**å¤–éƒ¨**çš„ä½œç”¨åŸŸå…±äº«ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç ä¸ä¼šå·¥ä½œï¼š

<Icon name="exclamation-triangle" color="red" /> **é”™è¯¯ç”¨æ³•**

```js
const foo = 1
cy.origin('cypress.io', () => {
  cy.visit('/')
  // æ­¤è¡Œå°†æŠ›å‡ºReferenceErrorï¼Œå› ä¸º
  // `foo`æœªåœ¨å›è°ƒä½œç”¨åŸŸä¸­å®šä¹‰
  cy.get('input').type(foo)
})
```

ç›¸åï¼Œå¿…é¡»ä½¿ç”¨`args`é€‰é¡¹å°†å˜é‡æ˜¾å¼ä¼ é€’åˆ°å›è°ƒä¸­ï¼š

<Icon name="check-circle" color="green" /> **æ­£ç¡®ç”¨æ³•**

```js
const foo = 1
cy.origin('cypress.io', { args: { foo } }, ({ foo }) => {
  cy.visit('/')
  // ç°åœ¨ä¼šé€šè¿‡
  cy.get('input').type(foo)
})
```

Cypressä½¿ç”¨[ç»“æ„åŒ–å…‹éš†ç®—æ³•](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm)å°†`args`é€‰é¡¹ä¼ è¾“åˆ°æ¬¡è¦æºã€‚è¿™å¼•å…¥äº†å¯¹å¯ä»¥ä¼ é€’åˆ°å›è°ƒä¸­çš„æ•°æ®çš„è®¸å¤š[é™åˆ¶](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm#things_that_dont_work_with_structured_clone)ã€‚

### ä¾èµ–é¡¹/å…±äº«ä»£ç 

åœ¨`cy.origin()`å›è°ƒå†…éƒ¨ï¼Œå¯ä»¥ä½¿ç”¨[`Cypress.require()`](/api/cypress-api/require)æ¥åŒ…å«[npm](https://www.npmjs.com/)åŒ…å’Œå…¶ä»–æ–‡ä»¶ã€‚å®ƒåœ¨åŠŸèƒ½ä¸Šä¸åœ¨æµè§ˆå™¨ç›®æ ‡ä»£ç ä¸­ä½¿ç”¨[CommonJS `require()`](https://nodejs.org/api/modules.html#requireid)ç›¸åŒã€‚

æ³¨æ„ï¼Œåœ¨å›è°ƒå†…éƒ¨æ— æ³•ä½¿ç”¨[CommonJS `require()`](https://nodejs.org/api/modules.html#requireid)æˆ–[ESæ¨¡å—`import()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import#dynamic_imports)ã€‚

:::caution

åœ¨å›è°ƒå†…éƒ¨ä½¿ç”¨`Cypress.require()`éœ€è¦åœ¨Cypressé…ç½®ä¸­å¯ç”¨[`experimentalOriginDependencies`](/app/references/experiments)é€‰é¡¹ã€‚

:::

æ›´å¤šä¿¡æ¯è¯·å‚é˜…[`Cypress.require()`æ–‡æ¡£](/api/cypress-api/require)æœ¬èº«ã€‚

#### ç¤ºä¾‹

```js
cy.origin('cypress.io', () => {
  const _ = Cypress.require('lodash')
  const utils = Cypress.require('../support/utils')

  // ... ä½¿ç”¨lodashå’Œutils ...
})
```

#### è‡ªå®šä¹‰å‘½ä»¤

è¿™ä½¿å¾—å¯ä»¥åœ¨ä¸»æºå’Œæ¬¡è¦æºè¿è¡Œçš„æµ‹è¯•ä¹‹é—´å…±äº«è‡ªå®šä¹‰å‘½ä»¤ã€‚æˆ‘ä»¬å»ºè®®ä½¿ç”¨ä»¥ä¸‹æ¨¡å¼è®¾ç½®ä½ çš„[æ”¯æŒæ–‡ä»¶](/app/core-concepts/writing-and-organizing-tests#Support-file)å¹¶è®¾ç½®åœ¨`cy.origin()`å›è°ƒå†…è¿è¡Œçš„è‡ªå®šä¹‰å‘½ä»¤ï¼š

`cypress/support/commands.js`:

```js
Cypress.Commands.add('clickLink', (label) => {
  cy.get('a').contains(label).click()
})
```

`cypress/support/e2e.js`:

```js
// ä½¿è‡ªå®šä¹‰å‘½ä»¤å¯ç”¨äºæ­¤è§„èŒƒä¸­çš„æ‰€æœ‰Cypressæµ‹è¯•ï¼Œ
// åœ¨cy.origin()å›è°ƒå¤–éƒ¨
import './commands'

// æˆ‘ä»¬åªæƒ³æ¯ä¸ªæµ‹è¯•è¿è¡Œçš„ä»£ç ï¼Œæ‰€ä»¥å®ƒä¸åº”è¯¥ä½œä¸º
// cy.origin()æ‰§è¡Œçš„ä¸€éƒ¨åˆ†è¿è¡Œ
beforeEach(() => {
  // ... æ¯ä¸ªæµ‹è¯•å‰è¿è¡Œçš„ä»£ç  ...
})
```

`cypress/e2e/spec.cy.js`:

```js
before(() => {
  // ä½¿è‡ªå®šä¹‰å‘½ä»¤å¯ç”¨äºæ­¤è§„èŒƒä¸­æ‰€æœ‰åç»­çš„cy.origin('cypress.io')è°ƒç”¨ã€‚
  // å°†å…¶æ”¾åœ¨æ”¯æŒæ–‡ä»¶ä¸­å¯ä½¿å®ƒä»¬å¯¹æ‰€æœ‰è§„èŒƒå¯ç”¨
  cy.origin('cypress.io', () => {
    Cypress.require('../support/commands')
  })
})

it('tests cypress.io', () => {
  cy.origin('cypress.io', () => {
    cy.visit('/page')
    cy.clickLink('Click Me')
  })
})
```

#### å…±äº«æ‰§è¡Œä¸Šä¸‹æ–‡

JavaScriptæ‰§è¡Œä¸Šä¸‹æ–‡åœ¨å…±äº«ç›¸åŒæºçš„`cy.origin()`å›è°ƒä¹‹é—´ä¿æŒæŒä¹…ã€‚è¿™å¯ä»¥ç”¨äºåœ¨è¿ç»­çš„`cy.origin()`è°ƒç”¨ä¹‹é—´å…±äº«ä»£ç ã€‚

```js
before(() => {
  cy.origin('cypress.io', () => {
    // ä½¿æ­¤æ–‡ä»¶ä¸­å®šä¹‰çš„å‘½ä»¤å¯¹æ‰€æœ‰å›è°ƒå¯ç”¨
    // å¯¹äºcypress.io
    Cypress.require('../support/commands')
  })
})

it('uses cy.origin() + custom command', () => {
  cy.origin('cypress.io', () => {
    cy.visit('/page')
    cy.clickLink('Click Me')
  })
})

it('also uses cy.origin() + custom command', () => {
  cy.origin('cypress.io', () => {
    cy.visit('/page')
    cy.clickLink('Click Me')
  })

  cy.origin('cypress-dx.com', () => {
    // è­¦å‘Šï¼šcy.clickLink()å°†ä¸å¯ç”¨ï¼Œå› ä¸ºå®ƒæ˜¯
    // ä¸åŒçš„æº
  })
})
```

### å›è°ƒé™åˆ¶

ç”±äºå›è°ƒä¼ è¾“å’Œæ‰§è¡Œçš„æ–¹å¼ï¼Œå›è°ƒå†…å¯ä»¥è¿è¡Œçš„ä»£ç æœ‰ä¸€äº›é™åˆ¶ã€‚ç‰¹åˆ«æ˜¯ï¼Œä»¥ä¸‹Cypresså‘½ä»¤å¦‚æœåœ¨å›è°ƒä¸­ä½¿ç”¨ä¼šæŠ›å‡ºé”™è¯¯ï¼š

- `cy.origin()`
- [`cy.intercept()`](/api/commands/intercept)
- [`cy.session()`](/api/commands/session)

### å…¶ä»–é™åˆ¶

è¿˜æœ‰å…¶ä»–æµ‹è¯•åœºæ™¯ç›®å‰ä¸è¢«`cy.origin()`è¦†ç›–ï¼š

- å®ƒæ— æ³•åœ¨[ä¸åŒçš„æµè§ˆå™¨çª—å£](/app/references/trade-offs#Multiple-browsers-open-at-the-same-time)ä¸­è¿è¡Œå‘½ä»¤
- å®ƒæ— æ³•åœ¨ä¸åŒçš„æµè§ˆå™¨æ ‡ç­¾é¡µä¸­è¿è¡Œå‘½ä»¤
- å®ƒæ— æ³•åœ¨[`<iframe>`å…ƒç´ å†…éƒ¨](/app/faq#How-do-I-test-elements-inside-an-iframe)è¿è¡Œå‘½ä»¤

## å†å²

| ç‰ˆæœ¬                                      | å˜æ›´                                                                                                      |
| ---------------------------------------- | -------------------------------------------------------------------------------------------------------- |
| [14.0.0](/app/references/changelog#14-0-0) | `cy.origin()`ç°åœ¨éœ€è¦åœ¨åŒä¸€æµ‹è¯•ä¸­å¯¼èˆªä¸åŒæºæ—¶ä½¿ç”¨ï¼Œè€Œä¸æ˜¯è¶…çº§åŸŸåã€‚                                       |
| [12.6.0](/app/references/changelog#10-7-0) | æ·»åŠ äº†å¯¹`Cypress.require()`çš„æ”¯æŒï¼Œå¹¶ç§»é™¤äº†å¯¹CommonJS `require()`å’ŒESæ¨¡å—`import()`çš„æ”¯æŒ                 |
| [10.11.0](/app/references/changelog#10-7-0) | æ·»åŠ äº†å¯¹CommonJS `require()`å’ŒESæ¨¡å—`import()`çš„æ”¯æŒï¼Œå¹¶ç§»é™¤äº†å¯¹`Cypress.require()`çš„æ”¯æŒ                |
| [10.7.0](/app/references/changelog#10-7-0) | æ·»åŠ äº†å¯¹`Cypress.require()`çš„æ”¯æŒ                                                                        |

## å¦è¯·å‚é˜…

- [ä½¿ç”¨cy.originè½»æ¾æµ‹è¯•å¤šåŸŸåå·¥ä½œæµ](https://cypress.io/blog/2022/04/25/cypress-9-6-0-easily-test-multi-domain-workflows-with-cy-origin/)
- [è‡ªå®šä¹‰å‘½ä»¤](/api/cypress-api/custom-commands)
- [`Cypress.require()`](/api/cypress-api/require)
- [`cy.session()`](/api/commands/session)
- [`cy.visit()`](/api/commands/visit)