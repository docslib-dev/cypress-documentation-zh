---
title: 'fixture | Cypress æ–‡æ¡£'
description: åœ¨Cypressä¸­åŠ è½½ä½äºæ–‡ä»¶ä¸­çš„å›ºå®šæ•°æ®é›†ã€‚
sidebar_label: fixture
---

<ProductHeading product="app" />

# fixture

åŠ è½½ä½äºæ–‡ä»¶ä¸­çš„å›ºå®šæ•°æ®é›†ã€‚

## è¯­æ³•

```javascript
cy.fixture(filePath)
cy.fixture(filePath, encoding)
cy.fixture(filePath, options)
cy.fixture(filePath, encoding, options)
```

### ç”¨æ³•

<Icon name="check-circle" color="green" /> **æ­£ç¡®ç”¨æ³•**

```javascript
cy.fixture('users').as('usersJson') // ä»users.jsonåŠ è½½æ•°æ®
cy.fixture('logo.png').then((logo) => {
  // ä»logo.pngåŠ è½½æ•°æ®
})
```

### å‚æ•°

<Icon name="angle-right" /> **filePath _(String)_**

æŒ‡å‘[`fixturesFolder`](/app/references/configuration#Folders--Files)å†…æ–‡ä»¶çš„è·¯å¾„ï¼Œé»˜è®¤ä¸º`cypress/fixtures`ã€‚

æ‚¨å¯ä»¥å°†fixtureåµŒå¥—åœ¨æ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶é€šè¿‡å®šä¹‰ä»fixturesFolderå¼€å§‹çš„è·¯å¾„æ¥å¼•ç”¨å®ƒä»¬ï¼š

```javascript
cy.fixture('users/admin.json') // ä»{fixturesFolder}/users/admin.jsonè·å–æ•°æ®
```

<Icon name="angle-right" /> **encoding _(String)_**

è¯»å–æ–‡ä»¶æ—¶ä½¿ç”¨çš„ç¼–ç ã€‚æ”¯æŒä»¥ä¸‹ç¼–ç ï¼š

- `'ascii'`
- `'base64'`
- `'binary'`
- `'hex'`
- `'latin1'`
- `'utf8'`
- `'utf-8'`
- `'ucs2'`
- `'ucs-2'`
- `'utf16le'`
- `'utf-16le'`
- `'null'`

æ˜¾å¼ä½¿ç”¨`null`å°†è¿”å›ä¸€ä¸ª[`Cypress.Buffer`](/api/utilities/buffer)å®ä¾‹ï¼Œæ— è®ºæ–‡ä»¶æ‰©å±•åæ˜¯ä»€ä¹ˆã€‚

<Icon name="angle-right" /> **options _(Object)_**

ä¼ å…¥ä¸€ä¸ªé€‰é¡¹å¯¹è±¡ä»¥æ›´æ”¹`cy.fixture()`çš„é»˜è®¤è¡Œä¸ºã€‚

| é€‰é¡¹      | é»˜è®¤å€¼                                                     | æè¿°                                                                 |
| --------- | ----------------------------------------------------------- | ------------------------------------------------------------------- |
| `timeout` | [`responseTimeout`](/app/references/configuration#Timeouts) | åœ¨[è¶…æ—¶](#Timeouts)ä¹‹å‰ç­‰å¾…`cy.fixture()`è§£æçš„æ—¶é—´                |

<HeaderYields />

- `cy.fixture()`è¿”å›æ–‡ä»¶çš„å†…å®¹ã€‚æ ¼å¼ç”±å…¶æ–‡ä»¶æ‰©å±•åå†³å®šã€‚
- å¦‚æœç£ç›˜ä¸Šçš„å†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œè¿”å›çš„ä¸»é¢˜**ä¸ä¼š**æ›´æ–°ã€‚

## ç¤ºä¾‹

### JSON

#### åŠ è½½`users.json` fixture

```javascript
cy.fixture('users.json').as('usersData')
```

#### çœç•¥fixtureæ–‡ä»¶çš„æ‰©å±•å

å½“æ²¡æœ‰æ‰©å±•åä¼ é€’ç»™`cy.fixture()`æ—¶ï¼ŒCypresså°†åœ¨[`fixturesFolder`](/app/references/configuration#Folders--Files)ï¼ˆé»˜è®¤ä¸º`cypress/fixtures`ï¼‰ä¸­æœç´¢å…·æœ‰æŒ‡å®šåç§°çš„æ–‡ä»¶ï¼Œå¹¶è§£æç¬¬ä¸€ä¸ªæ‰¾åˆ°çš„æ–‡ä»¶ã€‚

```javascript
cy.fixture('admin').as('adminJSON')
```

ä¸Šé¢çš„ç¤ºä¾‹å°†æŒ‰ä»¥ä¸‹é¡ºåºè§£æï¼š

1. `cypress/fixtures/admin.json`
2. `cypress/fixtures/admin.js`
3. `cypress/fixtures/admin.coffee`
4. `cypress/fixtures/admin.html`
5. `cypress/fixtures/admin.txt`
6. `cypress/fixtures/admin.csv`
7. `cypress/fixtures/admin.png`
8. `cypress/fixtures/admin.jpg`
9. `cypress/fixtures/admin.jpeg`
10. `cypress/fixtures/admin.gif`
11. `cypress/fixtures/admin.tif`
12. `cypress/fixtures/admin.tiff`
13. `cypress/fixtures/admin.zip`

#### ä½¿ç”¨importè¯­å¥

å¦‚æœæ‚¨æ­£åœ¨åŠ è½½JSON fixtureï¼Œå¯ä»¥ç®€å•åœ°ä½¿ç”¨`import`è¯­å¥å¹¶è®©æ‰“åŒ…å™¨åŠ è½½å®ƒï¼š

```js
// cypress/e2e/spec.cy.js
import user from '../fixtures/user.json'
it('loads the same object', () => {
  cy.fixture('user').then((userFixture) => {
    expect(user, 'the same data').to.deep.equal(userFixture)
  })
})
```

### å›¾ç‰‡

#### å›¾ç‰‡fixtureé»˜è®¤ä»¥`base64`æ ¼å¼å‘é€

```javascript
cy.fixture('images/logo.png').then((logo) => {
  // logoå°†ä»¥base64ç¼–ç 
  // çœ‹èµ·æ¥åƒè¿™æ ·ï¼š
  // aIJKnwxydrB10NVWqhlmmC+ZiWs7otHotSAAAOw==...
})
```

#### æ›´æ”¹å›¾ç‰‡fixtureçš„ç¼–ç 

```javascript
cy.fixture('images/logo.png', null).then((logo) => {
  // logoå°†ä½œä¸ºç¼“å†²åŒºè¯»å–
  // çœ‹èµ·æ¥åƒè¿™æ ·ï¼š
  // Buffer([0, 0, ...])
  expect(Cypress.Buffer.isBuffer(logo)).to.be.true
})
```

### æ’­æ”¾MP3æ–‡ä»¶

```javascript
cy.fixture('audio/sound.mp3', 'base64').then((mp3) => {
  const uri = 'data:audio/mp3;base64,' + mp3
  const audio = new Audio(uri)

  audio.play()
})
```

### è®¿é—®Fixtureæ•°æ®

#### ä½¿ç”¨`.then()`è®¿é—®fixtureæ•°æ®

```javascript
cy.fixture('users').then((json) => {
  cy.intercept('GET', '/users/**', json)
})
```

#### ä½¿ç”¨fixtureå¼•å¯¼æ•°æ®

:::info

[æŸ¥çœ‹æˆ‘ä»¬çš„ç¤ºä¾‹é…æ–¹ï¼Œä½¿ç”¨`cy.fixture()`ä¸ºåº”ç”¨ç¨‹åºå¼•å¯¼æ•°æ®ã€‚](/app/references/recipes#Server-Communication)

:::

#### åœ¨ä½¿ç”¨å‰ä¿®æ”¹fixtureæ•°æ®

æ‚¨å¯ä»¥ç›´æ¥ä¿®æ”¹fixtureæ•°æ®ï¼Œç„¶åè®¿é—®URLæˆ–æŒ‚è½½ä¸€ä¸ªå‘è¯¥URLå‘å‡ºç½‘ç»œè¯·æ±‚çš„ç»„ä»¶ã€‚

:::visit-mount-example

```js
cy.fixture('user').then((user) => {
  user.firstName = 'Jane'
  cy.intercept('GET', '/users/1', user).as('getUser')
})

-{cy.visit('/users')::cy.mount(<Users />)}-
cy.wait('@getUser').then(({ request }) => {
  expect(request.body.firstName).to.eq('Jane')
})
```

:::

## æ³¨æ„äº‹é¡¹

### å¿«æ·æ–¹å¼

#### ä½¿ç”¨`fixture` `StaticResponse`å±æ€§

Fixtureä¹Ÿå¯ä»¥é€šè¿‡ç›´æ¥åœ¨[`cy.intercept()`](/api/commands/intercept)çš„`StaticResponse`å¯¹è±¡ä¸Šä½¿ç”¨ç‰¹æ®Šå±æ€§`fixture`æ¥å¼•ç”¨ï¼Œè€Œæ— éœ€ä½¿ç”¨`.fixture()`å‘½ä»¤ã€‚

```javascript
cy.intercept('GET', '/users/**', { fixture: 'users' })
```

### éªŒè¯

#### è‡ªåŠ¨æ–‡ä»¶éªŒè¯

Cypressä¼šè‡ªåŠ¨éªŒè¯æ‚¨çš„fixtureã€‚å¦‚æœæ‚¨çš„`.json`ã€`.js`æˆ–`.coffee`æ–‡ä»¶åŒ…å«è¯­æ³•é”™è¯¯ï¼Œå®ƒä»¬å°†æ˜¾ç¤ºåœ¨å‘½ä»¤æ—¥å¿—ä¸­ã€‚

### ç¼–ç 

#### é»˜è®¤ç¼–ç 

Cypressè‡ªåŠ¨ç¡®å®šä»¥ä¸‹æ–‡ä»¶ç±»å‹çš„ç¼–ç ï¼š

- `.json`
- `.js`
- `.coffee`
- `.html`
- `.txt`
- `.csv`
- `.png`
- `.jpg`
- `.jpeg`
- `.gif`
- `.tif`
- `.tiff`
- `.zip`

å¯¹äºå…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼Œé»˜è®¤æƒ…å†µä¸‹å°†ä½œä¸º`utf8`è¯»å–ï¼Œé™¤éåœ¨`cy.fixture()`çš„ç¬¬äºŒä¸ªå‚æ•°ä¸­æŒ‡å®šã€‚æ‚¨å¯ä»¥æŒ‡å®š`null`ä½œä¸ºç¼–ç ï¼Œä»¥ä¾¿å°†æ–‡ä»¶ä½œä¸º[`Cypress.Buffer`](/api/utilities/buffer)å®ä¾‹è¯»å–ã€‚

### `this`ä¸Šä¸‹æ–‡

å¦‚æœæ‚¨ä½¿ç”¨`this`æµ‹è¯•ä¸Šä¸‹æ–‡å¯¹è±¡å­˜å‚¨å’Œè®¿é—®fixtureæ•°æ®ï¼Œè¯·ç¡®ä¿ä½¿ç”¨`function () { ... }`å›è°ƒã€‚å¦åˆ™ï¼Œæµ‹è¯•å¼•æ“å°†ä¸ä¼šå°†`this`æŒ‡å‘æµ‹è¯•ä¸Šä¸‹æ–‡ã€‚

```javascript
describe('User page', () => {
  beforeEach(function () {
    // "this"æŒ‡å‘æµ‹è¯•ä¸Šä¸‹æ–‡å¯¹è±¡
    cy.fixture('user').then((user) => {
      // "this"ä»ç„¶æ˜¯æµ‹è¯•ä¸Šä¸‹æ–‡å¯¹è±¡
      this.user = user
    })
  })

  // æµ‹è¯•å›è°ƒé‡‡ç”¨"function () { ... }"å½¢å¼
  it('has user', function () {
    // this.userå­˜åœ¨
    expect(this.user.firstName).to.equal('Jane')
  })
})
```

### ä»…åŠ è½½ä¸€æ¬¡

è¯·æ³¨æ„ï¼Œfixtureæ–‡ä»¶åœ¨æµ‹è¯•æœŸé—´å‡å®šä¸ºä¸å˜ï¼Œå› æ­¤Cypressä»…åŠ è½½å®ƒä»¬ä¸€æ¬¡ã€‚å³ä½¿æ‚¨è¦†ç›–fixtureæ–‡ä»¶æœ¬èº«ï¼Œå·²åŠ è½½çš„fixtureæ•°æ®ä»ä¿æŒä¸å˜ã€‚

å¦‚æœæ‚¨å¸Œæœ›åœ¨æµ‹è¯•æœŸé—´åŠ¨æ€æ›´æ”¹æ–‡ä»¶å†…å®¹ï¼Œè¯·è€ƒè™‘ä½¿ç”¨[`cy.readFile()`](/api/commands/readfile)ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³ç”¨ä¸åŒçš„å¯¹è±¡å›å¤ç½‘ç»œè¯·æ±‚ï¼Œä»¥ä¸‹**ä¸èµ·ä½œç”¨**ï¼š

```js
// ğŸš¨ ä¸èµ·ä½œç”¨
cy.intercept('GET', '/todos/1', { fixture: 'todo' }).as('todo')
// åº”ç”¨ç¨‹åºè¯·æ±‚/todos/1èµ„æº
// æ‹¦æˆªå™¨ç”¨todo.jsonæ–‡ä»¶ä¸­çš„å¯¹è±¡å›å¤

cy.wait('@todo').then(() => {
  cy.writeFile('/cypress/fixtures/todo.json', { title: 'New data' })
})
// åº”ç”¨ç¨‹åºå†æ¬¡è¯·æ±‚/todos/1èµ„æº
// æ‹¦æˆªå™¨ç”¨æœ€åˆåŠ è½½çš„todo.jsonæ–‡ä»¶ä¸­çš„å¯¹è±¡å›å¤
// è€Œä¸æ˜¯{ "title": "New data" }
```

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé¿å…ä½¿ç”¨fixtureæ–‡ä»¶ï¼Œè€Œæ˜¯ç”¨å¯¹è±¡å›å¤ç½‘ç»œè¯·æ±‚ï¼š

```js
// âœ… ç”¨å¯¹è±¡å›å¤
cy.fixture('todo.json').then((todo) => {
  cy.intercept('GET', '/todos/1', { body: todo }).as('todo')
  // åº”ç”¨ç¨‹åºè¯·æ±‚/todos/1èµ„æº
  // æ‹¦æˆªå™¨ç”¨åˆå§‹å¯¹è±¡å›å¤

  cy.wait('@todo').then(() => {
    // ä¿®æ”¹å“åº”å¯¹è±¡
    todo.title = 'New data'
    // å¹¶è¦†ç›–æ‹¦æˆªå™¨
    cy.intercept('GET', '/todos/1', { body: todo })
  })
})
```

## è§„åˆ™

<HeaderRequirements />

- `cy.fixture()`éœ€è¦é“¾æ¥åˆ°`cy`ã€‚

<HeaderAssertions />

- `cy.fixture()`åªä¼šè¿è¡Œæ‚¨é“¾æ¥çš„æ–­è¨€ä¸€æ¬¡ï¼Œå¹¶ä¸”ä¸ä¼š[é‡è¯•](/app/core-concepts/retry-ability)ã€‚

<HeaderTimeouts />

- `cy.fixture()`ä¸åº”è¯¥è¶…æ—¶ã€‚

:::caution

å› ä¸º`cy.fixture()`æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥åœ¨æŠ€æœ¯ä¸Šä¸å†…éƒ¨Cypressè‡ªåŠ¨åŒ–APIé€šä¿¡æ—¶å¯èƒ½ä¼šå‘ç”Ÿè¶…æ—¶ã€‚ä½†å‡ºäºå®é™…ç›®çš„ï¼Œè¿™ä¸åº”è¯¥å‘ç”Ÿã€‚

:::

## å‘½ä»¤æ—¥å¿—

- `cy.fixture()`**ä¸**åœ¨å‘½ä»¤æ—¥å¿—ä¸­è®°å½•

## å¦è¯·å‚é˜…

- [æŒ‡å—ï¼šå˜é‡å’Œåˆ«å](/app/core-concepts/variables-and-aliases)
- [`cy.intercept()`](/api/commands/intercept)
- [`.then()`](/api/commands/then)
- [`.readFile()`](/api/commands/readfile) ç”¨äºç±»ä¼¼çš„å‘½ä»¤ï¼Œä½†æ²¡æœ‰ç¼“å­˜å¹¶å…·æœ‰å†…ç½®çš„é‡è¯•èƒ½åŠ›
- [é…æ–¹ï¼šå¼•å¯¼åº”ç”¨ç¨‹åºæµ‹è¯•æ•°æ®](/app/references/recipes#Server-Communication)